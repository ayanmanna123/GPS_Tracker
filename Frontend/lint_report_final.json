[{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\Bus.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\BusDetailsPage2.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\BusMap.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\BusSearch.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\Complete.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'dispatch'. Either include it or remove the dependency array.","line":40,"column":6,"nodeType":"ArrayExpression","endLine":40,"endColumn":46,"suggestions":[{"desc":"Update the dependencies array to be: [dispatch, getAccessTokenSilently, navigate, user]","fix":{"range":[1263,1303],"text":"[dispatch, getAccessTokenSilently, navigate, user]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { setuser } from \"../../Redux/auth.reducer\";\r\nimport { useEffect } from \"react\";\r\nimport { toast } from \"sonner\";\r\n\r\nconst Complete = () => {\r\n  const navigate = useNavigate();\r\n  const { getAccessTokenSilently, user } = useAuth0();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      if (!user) return;\r\n      try {\r\n        const res = await axios.get(\r\n          `${import.meta.env.VITE_BASE_URL}/driver/veryfi/email/${user.email}`\r\n        );\r\n        dispatch(setuser(res.data.newUser));\r\n        if (res.data.success) {\r\n          navigate(\"/\"); // already registered driver\r\n        }\r\n        toast(res.data.message);\r\n      } catch (error) {\r\n        console.log(\r\n          \"Verification error:\",\r\n          error.response?.data || error.message\r\n        );\r\n        const errorMessage =\r\n          error.response?.data?.message || error.message || \"An error occurred\";\r\n        toast.error(errorMessage);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, [getAccessTokenSilently, navigate, user]);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"flex justify-center items-center absolute inset-0 gap-3 shadow-2xl \">\r\n        <Button\r\n          onClick={() => navigate(\"/Login/driver\")}\r\n          className=\"bg-green-500 hover:bg-green-600 cursor-pointer shadow-2xl\"\r\n        >\r\n          login as driver\r\n        </Button>\r\n\r\n        <Button\r\n          onClick={() => navigate(\"/Login/User\")}\r\n          className=\"bg-green-500 hover:bg-green-600 cursor-pointer shadow-2xl\"\r\n        >\r\n          login as User\r\n        </Button>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Complete;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\CreateBus.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useRef' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":1,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"useRef"},"fix":{"range":[24,32],"text":""},"desc":"Remove unused variable 'useRef'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":319,"column":54,"nodeType":"Identifier","messageId":"unusedVar","endLine":319,"endColumn":59,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[11643,11650],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":400,"column":52,"nodeType":"Identifier","messageId":"unusedVar","endLine":400,"endColumn":57,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[15291,15298],"text":""},"desc":"Remove unused variable 'index'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Navbar from \"../shared/Navbar\";\r\nimport { toast } from \"sonner\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nconst CreateBus = () => {\r\n  const { getAccessTokenSilently } = useAuth0();\r\n  const { darktheme } = useSelector((store) => store.auth);\r\n  const { t } = useTranslation();\r\n  const [deviceID, setDeviceID] = useState(\"\");\r\n  const [ticketPrice, setticketPrice] = useState(\"\");\r\n  const [to, setTo] = useState(\"\");\r\n  const [from, setFrom] = useState(\"\");\r\n  const [name, setName] = useState(\"\");\r\n  const [timeSlots, setTimeSlots] = useState([{ startTime: \"\", endTime: \"\" }]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [success, setSuccess] = useState(null);\r\n\r\n  // Separate states for \"From\" search\r\n  const [fromSearchQuery, setFromSearchQuery] = useState(\"\");\r\n  const [fromSuggestions, setFromSuggestions] = useState([]);\r\n  const [showFromSuggestions, setShowFromSuggestions] = useState(false);\r\n\r\n  // Separate states for \"To\" search\r\n  const [toSearchQuery, setToSearchQuery] = useState(\"\");\r\n  const [toSuggestions, setToSuggestions] = useState([]);\r\n  const [showToSuggestions, setShowToSuggestions] = useState(false);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const handleTimeSlotChange = (index, field, value) => {\r\n    const updatedSlots = [...timeSlots];\r\n    updatedSlots[index][field] = value;\r\n    setTimeSlots(updatedSlots);\r\n  };\r\n\r\n  const addTimeSlot = () => {\r\n    setTimeSlots([...timeSlots, { startTime: \"\", endTime: \"\" }]);\r\n  };\r\n\r\n  const removeTimeSlot = (index) => {\r\n    const updatedSlots = timeSlots.filter((_, i) => i !== index);\r\n    setTimeSlots(updatedSlots);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setSuccess(null);\r\n\r\n    try {\r\n      const token = await getAccessTokenSilently({\r\n        audience: \"http://localhost:5000/api/v3\",\r\n      });\r\n\r\n      const res = await axios.post(\r\n        `${import.meta.env.VITE_BASE_URL}/Bus/createbus`,\r\n        { name, deviceID, from, to, timeSlots, ticketPrice },\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n\r\n      setSuccess(t(\"createBus.successMessage\"));\r\n      setDeviceID(\"\");\r\n      setFrom(\"\");\r\n      setTo(\"\");\r\n      setName(\"\");\r\n      setFromSearchQuery(\"\");\r\n      setToSearchQuery(\"\");\r\n      setTimeSlots([{ startTime: \"\", endTime: \"\" }]);\r\n      toast(res.data.message);\r\n      navigate(\"/Bus\");\r\n    } catch (error) {\r\n      console.error(\"Error creating bus:\", error);\r\n      setSuccess(t(\"createBus.errorMessage\"));\r\n      const errorMessage =\r\n        error.response?.data?.message || error.message || t(\"createBus.genericError\");\r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Handle \"From\" search\r\n  const handleFromSearchChange = async (e) => {\r\n    const value = e.target.value;\r\n    setFromSearchQuery(value);\r\n\r\n    if (value.length < 3) {\r\n      setFromSuggestions([]);\r\n      setShowFromSuggestions(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(\r\n        `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(\r\n          value\r\n        )}&addressdetails=1&limit=5`\r\n      );\r\n      const data = await res.json();\r\n      setFromSuggestions(data);\r\n      setShowFromSuggestions(true);\r\n    } catch (error) {\r\n      console.error(\"Search failed:\", error);\r\n    }\r\n  };\r\n\r\n  // Handle \"To\" search\r\n  const handleToSearchChange = async (e) => {\r\n    const value = e.target.value;\r\n    setToSearchQuery(value);\r\n\r\n    if (value.length < 3) {\r\n      setToSuggestions([]);\r\n      setShowToSuggestions(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(\r\n        `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(\r\n          value\r\n        )}&addressdetails=1&limit=5`\r\n      );\r\n      const data = await res.json();\r\n      setToSuggestions(data);\r\n      setShowToSuggestions(true);\r\n    } catch (error) {\r\n      console.error(\"Search failed:\", error);\r\n    }\r\n  };\r\n\r\n  // Handle \"From\" suggestion click\r\n  const handleFromSuggestionClick = (place) => {\r\n    setFrom(place.display_name);\r\n    setFromSearchQuery(place.display_name);\r\n    setFromSuggestions([]);\r\n    setShowFromSuggestions(false);\r\n  };\r\n\r\n  // Handle \"To\" suggestion click\r\n  const handleToSuggestionClick = (place) => {\r\n    setTo(place.display_name);\r\n    setToSearchQuery(place.display_name);\r\n    setToSuggestions([]);\r\n    setShowToSuggestions(false);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`min-h-screen ${\r\n        darktheme\r\n          ? \"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900\"\r\n          : \"bg-gradient-to-br from-green-50 via-white to-green-100\"\r\n      }`}\r\n    >\r\n      <Navbar />\r\n\r\n      <main className=\"max-w-7xl mx-auto px-4 py-8\">\r\n        <Card\r\n          className={`max-w-md mx-auto mt-6 shadow-xl rounded-2xl border ${\r\n            darktheme\r\n              ? \"bg-gray-800 border-gray-700\"\r\n              : \"bg-white border-green-100\"\r\n          }`}\r\n        >\r\n          <CardHeader>\r\n            <CardTitle\r\n              className={`text-2xl font-bold text-center ${\r\n                darktheme ? \"text-white\" : \"text-gray-800\"\r\n              }`}\r\n            >\r\n              {t(\"createBus.pageTitle\")}\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <form className=\"space-y-4\" onSubmit={handleSubmit}>\r\n              {/* Bus Name */}\r\n              <div>\r\n                <Label\r\n                  htmlFor=\"name\"\r\n                  className={`block text-sm font-medium mb-2 ${\r\n                    darktheme ? \"text-gray-300\" : \"text-gray-700\"\r\n                  }`}\r\n                >\r\n                  {t(\"createBus.busName\")}\r\n                </Label>\r\n                <Input\r\n                  id=\"name\"\r\n                  value={name}\r\n                  onChange={(e) => setName(e.target.value)}\r\n                  placeholder={t(\"createBus.busNamePlaceholder\")}\r\n                  className={`w-full p-4 border rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all ${\r\n                    darktheme\r\n                      ? \"bg-gray-700 border-gray-600 text-white placeholder-gray-400\"\r\n                      : \"bg-white border-gray-300 text-gray-900\"\r\n                  }`}\r\n                  required\r\n                />\r\n              </div>\r\n\r\n              {/* Device ID */}\r\n              <div>\r\n                <Label\r\n                  htmlFor=\"deviceID\"\r\n                  className={`block text-sm font-medium mb-2 ${\r\n                    darktheme ? \"text-gray-300\" : \"text-gray-700\"\r\n                  }`}\r\n                >\r\n                  {t(\"createBus.deviceID\")}\r\n                </Label>\r\n                <Input\r\n                  id=\"deviceID\"\r\n                  value={deviceID}\r\n                  onChange={(e) => setDeviceID(e.target.value)}\r\n                  placeholder={t(\"createBus.deviceIDPlaceholder\")}\r\n                  className={`w-full p-4 border rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all ${\r\n                    darktheme\r\n                      ? \"bg-gray-700 border-gray-600 text-white placeholder-gray-400\"\r\n                      : \"bg-white border-gray-300 text-gray-900\"\r\n                  }`}\r\n                  required\r\n                />\r\n              </div>\r\n\r\n              {/* Ticket Price */}\r\n              <div>\r\n                <Label\r\n                  htmlFor=\"ticket-Price\"\r\n                  className={`block text-sm font-medium mb-2 ${\r\n                    darktheme ? \"text-gray-300\" : \"text-gray-700\"\r\n                  }`}\r\n                >\r\n                  {t(\"createBus.ticketPrice\")}\r\n                </Label>\r\n                <Input\r\n                  id=\"ticket-Price\"\r\n                  value={ticketPrice}\r\n                  onChange={(e) => setticketPrice(e.target.value)}\r\n                  placeholder={t(\"createBus.ticketPricePlaceholder\")}\r\n                  className={`w-full p-4 border rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all ${\r\n                    darktheme\r\n                      ? \"bg-gray-700 border-gray-600 text-white placeholder-gray-400\"\r\n                      : \"bg-white border-gray-300 text-gray-900\"\r\n                  }`}\r\n                  required\r\n                />\r\n              </div>\r\n\r\n              {/* From Location */}\r\n              <div>\r\n                <div\r\n                  className={`rounded-2xl p-6 shadow-lg border ${\r\n                    darktheme\r\n                      ? \"bg-gray-700 border-gray-600\"\r\n                      : \"bg-white border-gray-200\"\r\n                  }`}\r\n                >\r\n                  <div className=\"flex items-center gap-2 mb-5\">\r\n                    <span className=\"text-xl\">üîç</span>\r\n                    <h2\r\n                      className={`text-xl font-bold ${\r\n                        darktheme ? \"text-white\" : \"text-gray-800\"\r\n                      }`}\r\n                    >\r\n                      {t(\"createBus.from\")}\r\n                    </h2>\r\n                  </div>\r\n\r\n                  <div className=\"relative\">\r\n                    <input\r\n                      type=\"text\"\r\n                      value={fromSearchQuery}\r\n                      onChange={handleFromSearchChange}\r\n                      placeholder={t(\"createBus.fromPlaceholder\")}\r\n                      className={`w-full border-2 p-4 pr-12 rounded-xl focus:outline-none focus:border-blue-500 transition-all ${\r\n                        darktheme\r\n                          ? \"bg-gray-800 border-gray-600 text-white placeholder-gray-400\"\r\n                          : \"bg-white border-gray-200 text-gray-800 placeholder-gray-400\"\r\n                      }`}\r\n                      required\r\n                    />\r\n                    <div\r\n                      className={`absolute right-4 top-1/2 -translate-y-1/2 ${\r\n                        darktheme ? \"text-gray-500\" : \"text-gray-400\"\r\n                      }`}\r\n                    >\r\n                      <svg\r\n                        className=\"w-5 h-5\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        viewBox=\"0 0 24 24\"\r\n                      >\r\n                        <path\r\n                          strokeLinecap=\"round\"\r\n                          strokeLinejoin=\"round\"\r\n                          strokeWidth={2}\r\n                          d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\r\n                        />\r\n                      </svg>\r\n                    </div>\r\n\r\n                    {showFromSuggestions && fromSuggestions.length > 0 && (\r\n                      <ul\r\n                        className={`absolute border-2 rounded-xl shadow-2xl w-full mt-2 max-h-64 overflow-y-auto z-50 ${\r\n                          darktheme\r\n                            ? \"bg-gray-800 border-gray-600\"\r\n                            : \"bg-white border-gray-200\"\r\n                        }`}\r\n                      >\r\n                        {fromSuggestions.map((place, index) => (\r\n                          <li\r\n                            key={place.place_id}\r\n                            onClick={() => handleFromSuggestionClick(place)}\r\n                            className={`p-4 cursor-pointer text-sm border-b last:border-b-0 flex items-start gap-3 transition-colors ${\r\n                              darktheme\r\n                                ? \"text-gray-200 border-gray-700 hover:bg-gray-700\"\r\n                                : \"text-gray-700 border-gray-100 hover:bg-gray-50\"\r\n                            }`}\r\n                          >\r\n                            <span className=\"text-lg mt-0.5\">üìç</span>\r\n                            <span className=\"flex-1\">{place.display_name}</span>\r\n                          </li>\r\n                        ))}\r\n                      </ul>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* To Location */}\r\n              <div>\r\n                <div\r\n                  className={`rounded-2xl p-6 shadow-lg border ${\r\n                    darktheme\r\n                      ? \"bg-gray-700 border-gray-600\"\r\n                      : \"bg-white border-gray-200\"\r\n                  }`}\r\n                >\r\n                  <div className=\"flex items-center gap-2 mb-5\">\r\n                    <span className=\"text-xl\">üîç</span>\r\n                    <h2\r\n                      className={`text-xl font-bold ${\r\n                        darktheme ? \"text-white\" : \"text-gray-800\"\r\n                      }`}\r\n                    >\r\n                      {t(\"createBus.to\")}\r\n                    </h2>\r\n                  </div>\r\n\r\n                  <div className=\"relative\">\r\n                    <input\r\n                      type=\"text\"\r\n                      value={toSearchQuery}\r\n                      onChange={handleToSearchChange}\r\n                      placeholder={t(\"createBus.toPlaceholder\")}\r\n                      className={`w-full border-2 p-4 pr-12 rounded-xl focus:outline-none focus:border-blue-500 transition-all ${\r\n                        darktheme\r\n                          ? \"bg-gray-800 border-gray-600 text-white placeholder-gray-400\"\r\n                          : \"bg-white border-gray-200 text-gray-800 placeholder-gray-400\"\r\n                      }`}\r\n                      required\r\n                    />\r\n                    <div\r\n                      className={`absolute right-4 top-1/2 -translate-y-1/2 ${\r\n                        darktheme ? \"text-gray-500\" : \"text-gray-400\"\r\n                      }`}\r\n                    >\r\n                      <svg\r\n                        className=\"w-5 h-5\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        viewBox=\"0 0 24 24\"\r\n                      >\r\n                        <path\r\n                          strokeLinecap=\"round\"\r\n                          strokeLinejoin=\"round\"\r\n                          strokeWidth={2}\r\n                          d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\r\n                        />\r\n                      </svg>\r\n                    </div>\r\n\r\n                    {showToSuggestions && toSuggestions.length > 0 && (\r\n                      <ul\r\n                        className={`absolute border-2 rounded-xl shadow-2xl w-full mt-2 max-h-64 overflow-y-auto z-50 ${\r\n                          darktheme\r\n                            ? \"bg-gray-800 border-gray-600\"\r\n                            : \"bg-white border-gray-200\"\r\n                        }`}\r\n                      >\r\n                        {toSuggestions.map((place, index) => (\r\n                          <li\r\n                            key={place.place_id}\r\n                            onClick={() => handleToSuggestionClick(place)}\r\n                            className={`p-4 cursor-pointer text-sm border-b last:border-b-0 flex items-start gap-3 transition-colors ${\r\n                              darktheme\r\n                                ? \"text-gray-200 border-gray-700 hover:bg-gray-700\"\r\n                                : \"text-gray-700 border-gray-100 hover:bg-gray-50\"\r\n                            }`}\r\n                          >\r\n                            <span className=\"text-lg mt-0.5\">üìç</span>\r\n                            <span className=\"flex-1\">{place.display_name}</span>\r\n                          </li>\r\n                        ))}\r\n                      </ul>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Time Slots */}\r\n              <div>\r\n                <Label\r\n                  className={`block text-sm font-medium mb-2 ${\r\n                    darktheme ? \"text-gray-300\" : \"text-gray-700\"\r\n                  }`}\r\n                >\r\n                  {t(\"createBus.timeSlots\")}\r\n                </Label>\r\n                {timeSlots.map((slot, index) => (\r\n                  <div key={index} className=\"flex gap-2 mb-2 items-center\">\r\n                    <Input\r\n                      type=\"time\"\r\n                      value={slot.startTime}\r\n                      onChange={(e) =>\r\n                        handleTimeSlotChange(index, \"startTime\", e.target.value)\r\n                      }\r\n                      required\r\n                      className={`flex-1 p-3 border rounded-xl ${\r\n                        darktheme\r\n                          ? \"bg-gray-700 border-gray-600 text-white\"\r\n                          : \"bg-white border-gray-300 text-gray-900\"\r\n                      }`}\r\n                    />\r\n                    <span\r\n                      className={darktheme ? \"text-gray-400\" : \"text-gray-600\"}\r\n                    >\r\n                      {t(\"createBus.to\")}\r\n                    </span>\r\n                    <Input\r\n                      type=\"time\"\r\n                      value={slot.endTime}\r\n                      onChange={(e) =>\r\n                        handleTimeSlotChange(index, \"endTime\", e.target.value)\r\n                      }\r\n                      required\r\n                      className={`flex-1 p-3 border rounded-xl ${\r\n                        darktheme\r\n                          ? \"bg-gray-700 border-gray-600 text-white\"\r\n                          : \"bg-white border-gray-300 text-gray-900\"\r\n                      }`}\r\n                    />\r\n                    {timeSlots.length > 1 && (\r\n                      <Button\r\n                        type=\"button\"\r\n                        onClick={() => removeTimeSlot(index)}\r\n                        className=\"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-lg\"\r\n                      >\r\n                        {t(\"createBus.remove\")}\r\n                      </Button>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n                <Button\r\n                  type=\"button\"\r\n                  onClick={addTimeSlot}\r\n                  className=\"mt-2 w-full bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-xl\"\r\n                >\r\n                  {t(\"createBus.addTimeSlot\")}\r\n                </Button>\r\n              </div>\r\n\r\n              {/* Submit */}\r\n              <Button\r\n                type=\"submit\"\r\n                disabled={loading}\r\n                className=\"w-full px-8 py-4 rounded-xl font-medium transition-all duration-300 shadow-lg bg-gradient-to-r from-green-500 to-green-600 text-white hover:from-green-600 hover:to-green-700 hover:shadow-xl disabled:bg-gray-300 disabled:text-gray-500\"\r\n              >\r\n                {loading ? t(\"createBus.creating\") : t(\"createBus.createButton\")}\r\n              </Button>\r\n            </form>\r\n\r\n            {success && (\r\n              <p\r\n                className={`mt-4 text-center font-medium ${\r\n                  darktheme ? \"text-green-400\" : \"text-green-700\"\r\n                }`}\r\n              >\r\n                {success}\r\n              </p>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Footer */}\r\n        <footer className=\"mt-16 text-center text-sm\">\r\n          <p className={darktheme ? \"text-gray-500\" : \"text-gray-500\"}>\r\n            {t(\"createBus.footer\")}\r\n          </p>\r\n        </footer>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateBus;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\DriverLogin.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\FllowBusMap.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\History.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\Home.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\LocationTracker.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\MicInput.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\MyTickets.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\NearbyPOIMap.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\Profile.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'isEditing' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":31,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"isEditing"},"fix":{"range":[935,944],"text":""},"desc":"Remove unused variable 'isEditing'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setName' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":32,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"setName"},"fix":{"range":[993,1002],"text":""},"desc":"Remove unused variable 'setName'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setLicenceId' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":33,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"setLicenceId"},"fix":{"range":[1054,1068],"text":""},"desc":"Remove unused variable 'setLicenceId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setDriverExp' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":34,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"setDriverExp"},"fix":{"range":[1125,1139],"text":""},"desc":"Remove unused variable 'setDriverExp'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loading' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":35,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"loading"},"fix":{"range":[1187,1194],"text":""},"desc":"Remove unused variable 'loading'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'message' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":36,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"message"},"fix":{"range":[1237,1244],"text":""},"desc":"Remove unused variable 'message'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'handleUpdate' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":62,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":62,"endColumn":21}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\r\nimport { Avatar, AvatarImage, AvatarFallback } from \"@/components/ui/avatar\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  User,\r\n  CreditCard,\r\n  Calendar,\r\n  Mail,\r\n  Shield,\r\n  Edit3,\r\n  Save,\r\n  X,\r\n  Clock,\r\n  Hash,\r\n} from \"lucide-react\";\r\nimport axios from \"axios\";\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { setuser } from \"../../Redux/auth.reducer\";\r\nimport Navbar from \"../shared/Navbar\";\r\nimport { toast } from \"sonner\";\r\n\r\nconst Profile = () => {\r\n  const { usere, darktheme } = useSelector((store) => store.auth);\r\n  const { getAccessTokenSilently } = useAuth0();\r\n  const { t } = useTranslation();\r\n\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [name, setName] = useState(usere?.name || \"\");\r\n  const [licenceId, setLicenceId] = useState(usere?.licenceId || \"\");\r\n  const [driverExp, setDriverExp] = useState(usere?.driverExp || \"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState(\"\");\r\n  const dispatch = useDispatch();\r\n\r\n  if (!usere) {\r\n    return (\r\n      <div\r\n        className={`min-h-screen ${\r\n          darktheme\r\n            ? \"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900\"\r\n            : \"bg-gradient-to-br from-green-50 via-white to-green-100\"\r\n        }`}\r\n      >\r\n        <Navbar />\r\n        <div className=\"flex items-center justify-center py-16\">\r\n          <p\r\n            className={`text-center text-lg ${\r\n              darktheme ? \"text-gray-400\" : \"text-gray-600\"\r\n            }`}\r\n          >\r\n            {t(\"profile.noUserData\")}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const handleUpdate = async () => {\r\n    setLoading(true);\r\n    setMessage(\"\");\r\n    try {\r\n      const token = await getAccessTokenSilently({\r\n        audience: \"http://localhost:5000/api/v3\",\r\n      });\r\n      console.log(token);\r\n      const res = await axios.put(\r\n        `${import.meta.env.VITE_BASE_URL}/driver/update/profile`,\r\n        { name, licenceId, driverExp },\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n      dispatch(setuser(res.data.newDetails));\r\n      setMessage(t(\"profile.updateSuccess\"));\r\n      setIsEditing(false);\r\n      toast(res.data.message);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setMessage(t(\"profile.updateFailed\"));\r\n      const errorMessage =\r\n        err.response?.data?.message || err.message || t(\"profile.updateError\");\r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`min-h-screen ${\r\n        darktheme\r\n          ? \"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900\"\r\n          : \"bg-gradient-to-br from-green-50 via-white to-green-100\"\r\n      }`}\r\n    >\r\n      <Navbar />\r\n\r\n      <main className=\"max-w-7xl mx-auto px-4 py-8\">\r\n        {/* Header Section */}\r\n\r\n        <div className=\"max-w-2xl mx-auto\">\r\n          <Card\r\n            className={`shadow-xl rounded-2xl border ${\r\n              darktheme\r\n                ? \"bg-gray-800/80 border-gray-700 backdrop-blur-sm\"\r\n                : \"bg-white/80 border-green-100 backdrop-blur-sm\"\r\n            }`}\r\n          >\r\n            {/* Profile Header */}\r\n            <CardHeader className=\"flex flex-col items-center space-y-4 pb-6\">\r\n              <div className=\"relative\">\r\n                <Avatar\r\n                  className={`w-32 h-32 border-4 shadow-lg ${\r\n                    darktheme ? \"border-green-700\" : \"border-green-200\"\r\n                  }`}\r\n                >\r\n                  {usere.picture ? (\r\n                    <AvatarImage\r\n                      src={usere.picture}\r\n                      alt={usere.name}\r\n                      className=\"object-cover\"\r\n                    />\r\n                  ) : (\r\n                    <AvatarFallback\r\n                      className={`text-3xl font-bold ${\r\n                        darktheme\r\n                          ? \"bg-green-900 text-green-400\"\r\n                          : \"bg-green-100 text-green-700\"\r\n                      }`}\r\n                    >\r\n                      {usere.name.charAt(0)}\r\n                    </AvatarFallback>\r\n                  )}\r\n                </Avatar>\r\n                <div\r\n                  className={`absolute -bottom-2 -right-2 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center border-4 ${\r\n                    darktheme ? \"border-gray-800\" : \"border-white\"\r\n                  }`}\r\n                >\r\n                  <User className=\"w-4 h-4 text-white\" />\r\n                </div>\r\n              </div>\r\n              <div className=\"text-center\">\r\n                <CardTitle\r\n                  className={`text-2xl font-bold mb-1 ${\r\n                    darktheme ? \"text-white\" : \"text-gray-800\"\r\n                  }`}\r\n                >\r\n                  {usere.name}\r\n                </CardTitle>\r\n                <div\r\n                  className={`flex items-center justify-center ${\r\n                    darktheme ? \"text-gray-400\" : \"text-gray-600\"\r\n                  }`}\r\n                >\r\n                  <Mail className=\"w-4 h-4 mr-2\" />\r\n                  <span>{usere.email}</span>\r\n                </div>\r\n              </div>\r\n            </CardHeader>\r\n          </Card>\r\n\r\n          {/* Additional Info Cards */}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <footer className=\"mt-16 text-center text-sm\">\r\n          <p className={darktheme ? \"text-gray-500\" : \"text-gray-500\"}>\r\n            {t(\"profile.copyright\")}\r\n          </p>\r\n        </footer>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\RazorpayPayment.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'toast' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":9,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"toast"},"fix":{"range":[370,401],"text":""},"desc":"Remove unused variable 'toast'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \"react\";\r\nimport MicInput from \"./MicInput\";\r\nimport { MapContainer, Marker, TileLayer, useMapEvents } from \"react-leaflet\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport Navbar from \"../shared/Navbar\";\r\nimport { toast } from \"sonner\";\r\nimport { useSelector } from \"react-redux\";\r\nimport L from \"leaflet\";\r\n\r\nconst GEOCODE_API = \"https://nominatim.openstreetmap.org/search\";\r\nconst markerIcon = new L.Icon({\r\n  iconUrl: \"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png\",\r\n  iconSize: [25, 41],\r\n  iconAnchor: [12, 41],\r\n});\r\n\r\nconst LocationPicker = ({ onSelect }) => {\r\n  useMapEvents({\r\n    click(e) {\r\n      onSelect({ lat: e.latlng.lat, lon: e.latlng.lng });\r\n    },\r\n  });\r\n  return null;\r\n};\r\n\r\nconst PlaceSearch = ({ label, onSelect, enableUseMyLocation = false }) => {\r\n  const [query, setQuery] = useState(\"\");\r\n  const [suggestions, setSuggestions] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [loadingLocation, setLoadingLocation] = useState(false);\r\n  const [selectedPos, setSelectedPos] = useState(null);\r\n  const { darktheme } = useSelector((store) => store.auth);\r\n  const { t } = useTranslation();\r\n\r\n  const handleSearch = async (value) => {\r\n    setQuery(value);\r\n    if (value.length < 3) return setSuggestions([]);\r\n\r\n    try {\r\n      setLoading(true);\r\n      const res = await fetch(\r\n        `${GEOCODE_API}?q=${encodeURIComponent(value)}&format=json&limit=5`\r\n      );\r\n      const data = await res.json();\r\n      setSuggestions(data);\r\n    } catch (err) {\r\n      console.error(\"Geocode error:\", err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const reverseGeocode = async (lat, lon) => {\r\n    try {\r\n      const res = await fetch(\r\n        `${GEOCODE_API}?format=json&lat=${lat}&lon=${lon}&zoom=16&addressdetails=1`\r\n      );\r\n      const data = await res.json();\r\n      return data[0]?.display_name || `${lat}, ${lon}`;\r\n    } catch (err) {\r\n      console.error(\"Reverse geocoding failed\", err);\r\n      return `${lat}, ${lon}`;\r\n    }\r\n  };\r\n\r\n  const handleUseMyLocation = async () => {\r\n    if (!navigator.geolocation) {\r\n      alert(t(\"payment.geolocationNotSupported\"));\r\n      return;\r\n    }\r\n\r\n    setLoadingLocation(true);\r\n    navigator.geolocation.getCurrentPosition(\r\n      async (position) => {\r\n        const { latitude, longitude } = position.coords;\r\n        try {\r\n          const address = await reverseGeocode(latitude, longitude);\r\n\r\n          setQuery(address);\r\n          setSelectedPos({ lat: latitude, lon: longitude });\r\n          onSelect({ lat: latitude, lon: longitude, address });\r\n          setSuggestions([]);\r\n        } finally {\r\n          setLoadingLocation(false);\r\n        }\r\n      },\r\n      (err) => {\r\n        console.error(\"Geolocation error\", err);\r\n        alert(t(\"payment.unableToGetLocation\"));\r\n        setLoadingLocation(false);\r\n      }\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"mb-4 relative\">\r\n      <label\r\n        className={`block mb-1 font-medium ${darktheme ? \"text-gray-300\" : \"text-gray-700\"\r\n          }`}\r\n      >\r\n        {label}\r\n      </label>\r\n\r\n      <MicInput\r\n        type=\"text\"\r\n        value={query}\r\n        placeholder={t(\"payment.typePlaceholder\")}\r\n        onChange={(e) => handleSearch(e.target.value)}\r\n        className={`border p-2 w-full rounded ${darktheme\r\n            ? \"bg-gray-700 border-gray-600 text-white placeholder-gray-400\"\r\n            : \"bg-white border-gray-300 text-gray-900\"\r\n          }`}\r\n      />\r\n\r\n      {enableUseMyLocation && (\r\n        <button\r\n          type=\"button\"\r\n          className={`text-sm mt-1 underline ${darktheme ? \"text-blue-400\" : \"text-blue-600\"\r\n            }`}\r\n          onClick={handleUseMyLocation}\r\n          disabled={loadingLocation}\r\n        >\r\n          {loadingLocation ? t(\"payment.gettingLocation\") : t(\"payment.useMyLocation\")}\r\n        </button>\r\n      )}\r\n\r\n      {loading && (\r\n        <p\r\n          className={`text-sm mt-1 ${darktheme ? \"text-gray-500\" : \"text-gray-400\"\r\n            }`}\r\n        >\r\n          {t(\"payment.searching\")}\r\n        </p>\r\n      )}\r\n\r\n      {suggestions.length > 0 && (\r\n        <ul\r\n          className={`absolute z-10 w-full shadow rounded mt-1 max-h-40 overflow-y-auto ${darktheme\r\n              ? \"bg-gray-800 border border-gray-600\"\r\n              : \"bg-white border border-gray-200\"\r\n            }`}\r\n        >\r\n          {suggestions.map((s, idx) => (\r\n            <li\r\n              key={idx}\r\n              className={`p-2 cursor-pointer text-sm ${darktheme\r\n                  ? \"text-gray-200 hover:bg-gray-700\"\r\n                  : \"text-gray-900 hover:bg-gray-100\"\r\n                }`}\r\n              onClick={() => {\r\n                const pos = { lat: parseFloat(s.lat), lon: parseFloat(s.lon) };\r\n                setQuery(s.display_name);\r\n                setSelectedPos(pos);\r\n                onSelect({ ...pos, address: s.display_name });\r\n                setSuggestions([]);\r\n              }}\r\n            >\r\n              {s.display_name}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n\r\n      {selectedPos && (\r\n        <div className=\"mt-4 h-64\">\r\n          <MapContainer\r\n            center={[selectedPos.lat, selectedPos.lon]}\r\n            zoom={15}\r\n            style={{ height: \"100%\", width: \"100%\" }}\r\n          >\r\n            <TileLayer\r\n              url={\r\n                darktheme\r\n                  ? \"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png\"\r\n                  : \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n              }\r\n              attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n            />\r\n            <Marker\r\n              position={[selectedPos.lat, selectedPos.lon]}\r\n              icon={markerIcon}\r\n            />\r\n            <LocationPicker\r\n              onSelect={async (pos) => {\r\n                setSelectedPos(pos);\r\n                const address = await reverseGeocode(pos.lat, pos.lon);\r\n                setQuery(address);\r\n                onSelect({ ...pos, address });\r\n              }}\r\n            />\r\n          </MapContainer>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst RazorpayPayment = () => {\r\n  const [from, setFrom] = useState(null);\r\n  const [to, setTo] = useState(null);\r\n  const [busId] = useState(\"BUS-111\");\r\n  const [ticketData, setTicketData] = useState(null);\r\n  const [loadingPrice, setLoadingPrice] = useState(false);\r\n  const { deviceid } = useParams();\r\n  const { getAccessTokenSilently } = useAuth0();\r\n  const { darktheme } = useSelector((store) => store.auth);\r\n  const { t } = useTranslation();\r\n\r\n  const handleCalculatePrice = async () => {\r\n    if (!from || !to) {\r\n      alert(t(\"payment.selectBothLocations\"));\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoadingPrice(true);\r\n\r\n      const res = await fetch(\r\n        `${import.meta.env.VITE_BASE_URL}/Bus/calculate/price`,\r\n        {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({\r\n            busId: deviceid,\r\n            fromLat: from.lat,\r\n            fromLng: from.lon,\r\n            toLat: to.lat,\r\n            toLng: to.lon,\r\n          }),\r\n        }\r\n      );\r\n      const data = await res.json();\r\n      if (data.success) {\r\n        setTicketData(data.data);\r\n      } else {\r\n        alert(t(\"payment.failedCalculatePrice\"));\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(t(\"payment.errorCalculatingPrice\"));\r\n    } finally {\r\n      setLoadingPrice(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className={`min-h-screen py-8 ${darktheme\r\n            ? \"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900\"\r\n            : \"bg-gradient-to-br from-green-50 via-white to-green-100\"\r\n          }`}\r\n      >\r\n        <Navbar />\r\n        <div\r\n          className={`max-w-md mx-auto p-6 rounded-lg shadow-lg ${darktheme\r\n              ? \"bg-gray-800 border border-gray-700\"\r\n              : \"bg-white border border-gray-200\"\r\n            }`}\r\n        >\r\n          <h2\r\n            className={`text-xl font-semibold mb-4 ${darktheme ? \"text-white\" : \"text-gray-800\"\r\n              }`}\r\n          >\r\n            {t(\"payment.pageTitle\")}\r\n          </h2>\r\n\r\n          <div className=\"mb-6\">\r\n            <PlaceSearch\r\n              label={t(\"payment.from\")}\r\n              enableUseMyLocation={true}\r\n              onSelect={(place) => setFrom({ lat: place.lat, lon: place.lon })}\r\n            />\r\n            <PlaceSearch\r\n              label={t(\"payment.to\")}\r\n              onSelect={(place) => setTo({ lat: place.lat, lon: place.lon })}\r\n            />\r\n          </div>\r\n\r\n          <button\r\n            className={`w-full px-6 py-2 rounded-lg shadow-md mb-4 transition-colors ${darktheme\r\n                ? \"bg-blue-600 hover:bg-blue-700 text-white\"\r\n                : \"bg-blue-500 hover:bg-blue-600 text-white\"\r\n              }`}\r\n            onClick={handleCalculatePrice}\r\n            disabled={loadingPrice}\r\n          >\r\n            {loadingPrice ? t(\"payment.calculating\") : t(\"payment.getTicketPrice\")}\r\n          </button>\r\n\r\n          {ticketData && (\r\n            <div\r\n              className={`p-4 rounded ${darktheme\r\n                  ? \"bg-gray-700 border border-gray-600\"\r\n                  : \"bg-gray-100 border border-gray-200\"\r\n                }`}\r\n            >\r\n              <p className={darktheme ? \"text-gray-200\" : \"text-gray-800\"}>\r\n                <strong>{t(\"payment.fromIndex\")}</strong> {ticketData.fromIndex}\r\n              </p>\r\n              <p className={darktheme ? \"text-gray-200\" : \"text-gray-800\"}>\r\n                <strong>{t(\"payment.toIndex\")}</strong> {ticketData.toIndex}\r\n              </p>\r\n              <p className={darktheme ? \"text-gray-200\" : \"text-gray-800\"}>\r\n                <strong>{t(\"payment.totalDistance\")}</strong> {ticketData.totalDistance} {t(\"payment.km\")}\r\n              </p>\r\n              <p className={darktheme ? \"text-gray-200\" : \"text-gray-800\"}>\r\n                <strong>{t(\"payment.passengerDistance\")}</strong>{\" \"}\r\n                {ticketData.passengerDistance} {t(\"payment.km\")}\r\n              </p>\r\n              <p className={darktheme ? \"text-gray-200\" : \"text-gray-800\"}>\r\n                <strong>{t(\"payment.ticketPrice\")}</strong> ‚Çπ{ticketData.ticketPrice}\r\n              </p>\r\n              <p className={darktheme ? \"text-gray-200\" : \"text-gray-800\"}>\r\n                <strong>{t(\"payment.pricePerKm\")}</strong> ‚Çπ{ticketData.pricePerKm}\r\n              </p>\r\n\r\n              <button\r\n                className={`w-full px-6 py-2 rounded-lg shadow-md mt-4 transition-colors ${darktheme\r\n                    ? \"bg-green-600 hover:bg-green-700 text-white\"\r\n                    : \"bg-green-500 hover:bg-green-600 text-white\"\r\n                  }`}\r\n                onClick={async () => {\r\n                  // Razorpay payment\r\n                  const res = await fetch(\r\n                    `${import.meta.env.VITE_BASE_URL}/Bus/create-order`,\r\n                    {\r\n                      method: \"POST\",\r\n                      headers: { \"Content-Type\": \"application/json\" },\r\n                      body: JSON.stringify({ amount: ticketData.ticketPrice }),\r\n                    }\r\n                  );\r\n                  const order = await res.json();\r\n\r\n                  const options = {\r\n                    key: \"rzp_test_RPcZFwp7G16Gjf\",\r\n                    amount: order.amount,\r\n                    currency: order.currency,\r\n                    name: t(\"payment.busTicketBooking\"),\r\n                    description: `${t(\"payment.ticketFor\")} ${busId}`,\r\n                    order_id: order.id,\r\n                    handler: async function (response) {\r\n                      const token = await getAccessTokenSilently({\r\n                        audience: \"http://localhost:5000/api/v3\",\r\n                      });\r\n                      const verifyRes = await axios.post(\r\n                        `${import.meta.env.VITE_BASE_URL}/Bus/verify-payment`,\r\n\r\n                        {\r\n                          razorpay_order_id: response.razorpay_order_id,\r\n                          razorpay_payment_id: response.razorpay_payment_id,\r\n                          razorpay_signature: response.razorpay_signature,\r\n                          ticketData,\r\n                          busId: deviceid,\r\n                          fromLat: from.lat,\r\n                          fromLng: from.lon,\r\n                          toLat: to.lat,\r\n                          toLng: to.lon,\r\n                        },\r\n                        { headers: { Authorization: `Bearer ${token}` } }\r\n                      );\r\n\r\n                      const verifyData = await verifyRes.json();\r\n                      alert(verifyData.message);\r\n                      console.log(\"‚úÖ Verify Response:\", verifyData);\r\n                    },\r\n\r\n                    prefill: {\r\n                      name: \"Ayan Manna\",\r\n                      email: \"mannaayan777@gmail.com\",\r\n                      contact: \"9907072795\",\r\n                    },\r\n                    theme: { color: \"#3399cc\" },\r\n                  };\r\n\r\n                  const rzp1 = new window.Razorpay(options);\r\n                  rzp1.open();\r\n                }}\r\n              >\r\n                {t(\"payment.pay\")} ‚Çπ{ticketData.ticketPrice}\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default RazorpayPayment;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\ReviewForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\SupportChat.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\SupportPopover.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\TicketDetails.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\UserLogin.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\theme-toggle.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
