[{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\App.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\Redux\\auth.reducer.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\Redux\\history.reducer.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\Redux\\locationSlice.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\Redux\\store.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\Bus.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The ref value 'locationIntervals.current' will likely have changed by the time this effect cleanup function runs. If this ref points to a node rendered by React, copy 'locationIntervals.current' to a variable inside the effect, and use that variable in the cleanup function.","line":69,"column":39,"nodeType":"Identifier","endLine":69,"endColumn":46}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useRef, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport {\r\n  Bus as BusIcon,\r\n  MapPin,\r\n  Navigation,\r\n  User,\r\n  Mail,\r\n  CreditCard,\r\n  ArrowLeft,\r\n  Plus,\r\n} from \"lucide-react\";\r\nimport Navbar from \"../shared/Navbar\";\r\nimport { toast } from \"sonner\";\r\nimport { addActiveBus, removeActiveBus } from \"@/Redux/locationSlice\";\r\n\r\nconst Bus = () => {\r\n  const { getAccessTokenSilently } = useAuth0();\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n  const { darktheme } = useSelector((store) => store.auth);\r\n  const { t } = useTranslation();\r\n\r\n  const [buses, setBuses] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  const activeBusIDs = useSelector((state) => state.location.activeBusIDs);\r\n\r\n  const locationIntervals = useRef({});\r\n\r\n  // ‚úÖ Fetch all buses on mount\r\n  useEffect(() => {\r\n    const fetchBuses = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const token = await getAccessTokenSilently({\r\n          audience: \"http://localhost:5000/api/v3\",\r\n        });\r\n\r\n        const res = await axios.get(\r\n          `${import.meta.env.VITE_BASE_URL}/driver/allBus`,\r\n          {\r\n            headers: { Authorization: `Bearer ${token}` },\r\n          }\r\n        );\r\n\r\n        toast(res.data.message);\r\n        setBuses(res.data.AllBus || []);\r\n      } catch (error) {\r\n        const msg = error?.response?.data?.message || error.message;\r\n        toast.error(msg || t(\"bus.fetchError\"));\r\n        setError(msg);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchBuses();\r\n  }, [getAccessTokenSilently, t]);\r\n\r\n  // ‚úÖ Clean up intervals on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      Object.values(locationIntervals.current).forEach(clearInterval);\r\n    };\r\n  }, []);\r\n\r\n  // ‚úÖ Toggle active state and start/stop location updates\r\n  const toggleBusActive = async (busId) => {\r\n    const isActive = activeBusIDs.includes(busId);\r\n\r\n    if (isActive) {\r\n      dispatch(removeActiveBus(busId));\r\n      clearInterval(locationIntervals.current[busId]);\r\n      delete locationIntervals.current[busId];\r\n    } else {\r\n      dispatch(addActiveBus(busId));\r\n\r\n      const sendLocation = async () => {\r\n        if (!navigator.geolocation) return;\r\n\r\n        navigator.geolocation.getCurrentPosition(\r\n          async (position) => {\r\n            const { latitude, longitude } = position.coords;\r\n            try {\r\n              await axios.put(\r\n                `${import.meta.env.VITE_BASE_URL}/update/location`,\r\n                {\r\n                  deviceID: busId,\r\n                  latitude,\r\n                  longitude,\r\n                }\r\n              );\r\n            } catch (err) {\r\n              console.error(t(\"bus.locationError\"), err.message);\r\n            }\r\n          },\r\n          (err) => {\r\n            console.error(t(\"bus.geolocationError\"), err.message);\r\n          }\r\n        );\r\n      };\r\n\r\n      sendLocation(); // send immediately\r\n      locationIntervals.current[busId] = setInterval(sendLocation, 5000);\r\n    }\r\n  };\r\n\r\n  const handleBusClick = (bus) => {\r\n    navigate(`/bus/${bus.deviceID}`);\r\n  };\r\n\r\n  const handleCreateBus = () => {\r\n    navigate(\"/createbus\");\r\n  };\r\n  \r\n  return (\r\n    <div\r\n      className={`min-h-screen ${\r\n        darktheme\r\n          ? \"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900\"\r\n          : \"bg-gradient-to-br from-green-50 via-white to-green-100\"\r\n      }`}\r\n    >\r\n      <Navbar />\r\n\r\n      <main className=\"max-w-7xl mx-auto px-4 py-8\">\r\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4\">\r\n          <button\r\n            onClick={() => navigate(-1)}\r\n            className={`absolute left-4 p-2 transition-colors ${\r\n              darktheme\r\n                ? \"text-gray-400 hover:text-gray-200\"\r\n                : \"text-gray-600 hover:text-gray-800\"\r\n            }`}\r\n          >\r\n            <ArrowLeft className=\"w-6 h-6\" />\r\n          </button>\r\n          <div>\r\n            <h1\r\n              className={`text-4xl font-bold mb-2 ${\r\n                darktheme ? \"text-white\" : \"text-gray-800\"\r\n              }`}\r\n            >\r\n              All Buses\r\n            </h1>\r\n            <p\r\n              className={`text-lg ${\r\n                darktheme ? \"text-gray-300\" : \"text-gray-600\"\r\n              }`}\r\n            >\r\n              Manage and monitor your fleet of buses\r\n            </p>\r\n          </div>\r\n\r\n          <button\r\n            onClick={handleCreateBus}\r\n            className=\"px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl font-medium transition-all duration-300 shadow-lg hover:from-green-600 hover:to-green-700 hover:shadow-xl hover:scale-105 flex items-center\"\r\n          >\r\n            <Plus className=\"w-5 h-5 mr-2\" />\r\n            Create New Bus\r\n          </button>\r\n        </div>\r\n        {!loading && !error && (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n            {buses.length > 0 ? (\r\n              buses.map((bus) => (\r\n                <div\r\n                  key={bus._id}\r\n                  className={`rounded-2xl shadow-lg p-6 hover:shadow-xl transition-all duration-300 cursor-pointer ${\r\n                    darktheme\r\n                      ? \"bg-gray-800 border border-gray-700\"\r\n                      : \"bg-white border border-green-100\"\r\n                  }`}\r\n                >\r\n                  {/* Bus Header */}\r\n                  <div className=\"flex items-center justify-between mb-4\">\r\n                    <div\r\n                      className=\"flex items-center\"\r\n                      onClick={() => handleBusClick(bus)}\r\n                    >\r\n                      <div\r\n                        className={`w-10 h-10 rounded-full flex items-center justify-center mr-3 ${\r\n                          darktheme ? \"bg-green-900/50\" : \"bg-green-100\"\r\n                        }`}\r\n                      >\r\n                        <BusIcon className=\"w-5 h-5 text-green-600\" />\r\n                      </div>\r\n                      <h3\r\n                        className={`text-lg font-bold ${\r\n                          darktheme ? \"text-white\" : \"text-gray-800\"\r\n                        }`}\r\n                      >\r\n                        {bus.deviceID}\r\n                      </h3>\r\n                    </div>\r\n\r\n                    {/* Toggle Switch */}\r\n                    <div className=\"flex items-center\">\r\n                      <label className=\"flex items-center cursor-pointer\">\r\n                        <div className=\"relative\">\r\n                          <input\r\n                            type=\"checkbox\"\r\n                            className=\"sr-only\"\r\n                            checked={activeBusIDs.includes(bus.deviceID)}\r\n                            onChange={() => toggleBusActive(bus.deviceID)}\r\n                          />\r\n                          <div\r\n                            className={`w-10 h-5 rounded-full shadow-inner transition ${\r\n                              activeBusIDs.includes(bus.deviceID)\r\n                                ? \"bg-green-500\"\r\n                                : \"bg-gray-300\"\r\n                            }`}\r\n                          ></div>\r\n                          <div\r\n                            className={`dot absolute left-1 top-1 w-3 h-3 bg-white rounded-full transition ${\r\n                              activeBusIDs.includes(bus.deviceID)\r\n                                ? \"translate-x-5\"\r\n                                : \"translate-x-0\"\r\n                            }`}\r\n                          ></div>\r\n                        </div>\r\n                      </label>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Route Info */}\r\n                  <div className=\"space-y-3 mb-4\">\r\n                    <div\r\n                      className={`flex items-center ${\r\n                        darktheme ? \"text-gray-300\" : \"text-gray-700\"\r\n                      }`}\r\n                    >\r\n                      <MapPin className=\"w-4 h-4 text-green-500 mr-2 flex-shrink-0\" />\r\n                      <div className=\"min-w-0 flex-1\">\r\n                        <span className=\"text-sm font-medium\">\r\n                          {t(\"bus.from\")}\r\n                        </span>\r\n                        <p className=\"text-sm truncate\">{bus.from}</p>\r\n                      </div>\r\n                    </div>\r\n                    <div\r\n                      className={`flex items-center ${\r\n                        darktheme ? \"text-gray-300\" : \"text-gray-700\"\r\n                      }`}\r\n                    >\r\n                      <Navigation className=\"w-4 h-4 text-blue-500 mr-2 flex-shrink-0\" />\r\n                      <div className=\"min-w-0 flex-1\">\r\n                        <span className=\"text-sm font-medium\">\r\n                          {t(\"bus.to\")}\r\n                        </span>\r\n                        <p className=\"text-sm truncate\">{bus.to}</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Driver Info */}\r\n                  {bus.driver ? (\r\n                    <div\r\n                      className={`border-t pt-4 mt-4 -mx-6 px-6 -mb-6 pb-6 rounded-b-2xl ${\r\n                        darktheme\r\n                          ? \"bg-gray-900/50 border-gray-700\"\r\n                          : \"bg-gray-50 border-gray-200\"\r\n                      }`}\r\n                    >\r\n                      <h4\r\n                        className={`text-sm font-semibold mb-3 flex items-center ${\r\n                          darktheme ? \"text-gray-200\" : \"text-gray-800\"\r\n                        }`}\r\n                      >\r\n                        <User className=\"w-4 h-4 mr-2\" />\r\n                        {t(\"bus.driverDetails\")}\r\n                      </h4>\r\n                      <div className=\"space-y-2\">\r\n                        <div\r\n                          className={`flex items-center ${\r\n                            darktheme ? \"text-gray-400\" : \"text-gray-600\"\r\n                          }`}\r\n                        >\r\n                          <User className=\"w-3 h-3 mr-2\" />\r\n                          <span className=\"text-sm\">{bus.driver.name}</span>\r\n                        </div>\r\n                        <div\r\n                          className={`flex items-center ${\r\n                            darktheme ? \"text-gray-400\" : \"text-gray-600\"\r\n                          }`}\r\n                        >\r\n                          <Mail className=\"w-3 h-3 mr-2\" />\r\n                          <span className=\"text-sm truncate\">\r\n                            {bus.driver.email}\r\n                          </span>\r\n                        </div>\r\n                        <div\r\n                          className={`flex items-center ${\r\n                            darktheme ? \"text-gray-400\" : \"text-gray-600\"\r\n                          }`}\r\n                        >\r\n                          <CreditCard className=\"w-3 h-3 mr-2\" />\r\n                          <span className=\"text-sm\">\r\n                            {t(\"bus.license\")} {bus.driver.licenceId}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    <div\r\n                      className={`border-t pt-4 mt-4 text-center ${\r\n                        darktheme ? \"border-gray-700\" : \"border-gray-200\"\r\n                      }`}\r\n                    >\r\n                      <p\r\n                        className={`text-sm italic ${\r\n                          darktheme ? \"text-gray-500\" : \"text-gray-500\"\r\n                        }`}\r\n                      >\r\n                        {t(\"bus.noDriverAssigned\")}\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ))\r\n            ) : (\r\n              <div className=\"col-span-full text-center text-gray-500\">\r\n                {t(\"bus.noBusesFound\")}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Bus;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\BusDetailsPage2.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\BusMap.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":160,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":160,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"err"},"fix":{"range":[4674,4677],"text":""},"desc":"Remove unused variable 'err'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from \"react\";\r\nimport { MapContainer, TileLayer, Marker, Popup } from \"react-leaflet\";\r\nimport L from \"leaflet\";\r\nimport axios from \"axios\";\r\nimport {\r\n  MapPin,\r\n  Navigation,\r\n  Clock,\r\n  User,\r\n  Route,\r\n  AlertTriangle,\r\n  RefreshCw,\r\n  Locate,\r\n} from \"lucide-react\";\r\nimport Navbar from \"../shared/Navbar\";\r\nimport { toast } from \"sonner\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\n// Helper to create a custom marker with bus emoji\r\nconst createBusIcon = (isActive = true) => {\r\n  return L.divIcon({\r\n    html: `<div style=\"\r\n      background-color: ${isActive ? \"#16a34a\" : \"#6b7280\"}; \r\n      color: white; \r\n      font-size: 20px; \r\n      width: 32px; \r\n      height: 32px; \r\n      border-radius: 50%; \r\n      display: flex; \r\n      align-items: center; \r\n      justify-content: center;\r\n      border: 3px solid white;\r\n      box-shadow: 0 2px 8px rgba(0,0,0,0.2);\r\n    \">üöå</div>`,\r\n    className: \"\",\r\n    iconSize: [32, 32],\r\n    iconAnchor: [16, 16],\r\n  });\r\n};\r\n\r\n// Custom user location icon\r\nconst createUserIcon = () => {\r\n  return L.divIcon({\r\n    html: `<div style=\"\r\n      background-color: #3b82f6; \r\n      color: white; \r\n      font-size: 16px; \r\n      width: 28px; \r\n      height: 28px; \r\n      border-radius: 50%; \r\n      display: flex; \r\n      align-items: center; \r\n      justify-content: center;\r\n      border: 3px solid white;\r\n      box-shadow: 0 2px 8px rgba(0,0,0,0.2);\r\n    \">üìç</div>`,\r\n    className: \"\",\r\n    iconSize: [28, 28],\r\n    iconAnchor: [14, 14],\r\n  });\r\n};\r\n\r\nconst BusMap = () => {\r\n  const { t } = useTranslation();\r\n  const [userLocation, setUserLocation] = useState([22.5726, 88.3639]); // default Kolkata\r\n  const [busLocations, setBusLocations] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [lastUpdated, setLastUpdated] = useState(null);\r\n  const [locationError, setLocationError] = useState(null);\r\n  const navigate = useNavigate();\r\n  const { darktheme } = useSelector((store) => store.auth);\r\n\r\n  // Get user location\r\n  useEffect(() => {\r\n    if (navigator.geolocation) {\r\n      navigator.geolocation.getCurrentPosition(\r\n        (position) => {\r\n          setUserLocation([\r\n            position.coords.latitude,\r\n            position.coords.longitude,\r\n          ]);\r\n          setLocationError(null);\r\n        },\r\n        (err) => {\r\n          console.error(\"Error getting location:\", err);\r\n          setLocationError(t(\"busMap.locationError\"));\r\n        }\r\n      );\r\n    } else {\r\n      setLocationError(t(\"busMap.geolocationNotSupported\"));\r\n    }\r\n  }, [t]);\r\n\r\n  // Fetch all bus details\r\n  useEffect(() => {\r\n    const fetchBusLocations = async () => {\r\n      try {\r\n        setError(null);\r\n        const res = await axios.get(\r\n          `${import.meta.env.VITE_BASE_URL}/AllLocation`\r\n        );\r\n        setBusLocations(res.data.buses || []);\r\n        setLastUpdated(new Date());\r\n        setIsLoading(false);\r\n      } catch (error) {\r\n        console.error(\"Error fetching bus locations:\", error);\r\n        setError(t(\"busMap.fetchError\"));\r\n        setIsLoading(false);\r\n        const errorMessage =\r\n          error.response?.data?.message || error.message || t(\"busMap.errorOccurred\");\r\n        toast.error(errorMessage);\r\n      }\r\n    };\r\n\r\n    // Call immediately once\r\n    fetchBusLocations();\r\n\r\n    // Set interval for every 5 sec\r\n    const interval = setInterval(fetchBusLocations, 5000);\r\n\r\n    // Cleanup when component unmounts\r\n    return () => clearInterval(interval);\r\n  }, [t]);\r\n\r\n  // Manual refresh function\r\n  const handleRefresh = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const res = await axios.get(\r\n        `${import.meta.env.VITE_BASE_URL}/AllLocation`\r\n      );\r\n      setBusLocations(res.data.buses || []);\r\n      setLastUpdated(new Date());\r\n      setError(null);\r\n      toast(res.data.message);\r\n    } catch (error) {\r\n      setError(t(\"busMap.refreshError\"));\r\n      const errorMessage =\r\n        error.response?.data?.message || error.message || t(\"busMap.errorOccurred\");\r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Get current user location again\r\n  const handleGetCurrentLocation = () => {\r\n    if (navigator.geolocation) {\r\n      navigator.geolocation.getCurrentPosition(\r\n        (position) => {\r\n          setUserLocation([\r\n            position.coords.latitude,\r\n            position.coords.longitude,\r\n          ]);\r\n          setLocationError(null);\r\n        },\r\n        (err) => {\r\n          setLocationError(t(\"busMap.currentLocationError\"));\r\n        }\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`min-h-screen ${\r\n        darktheme\r\n          ? \"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900\"\r\n          : \"bg-gradient-to-br from-green-50 via-white to-green-100\"\r\n      }`}\r\n    >\r\n      <Navbar />\r\n\r\n      <main className=\"max-w-7xl mx-auto px-4 py-8\">\r\n        {/* Header Section */}\r\n        <div className=\"text-center mb-6\">\r\n          <h1\r\n            className={`text-4xl font-bold mb-4 ${\r\n              darktheme ? \"text-white\" : \"text-gray-800\"\r\n            }`}\r\n          >\r\n            {t(\"busMap.pageTitle\")}\r\n          </h1>\r\n          <p\r\n            className={`text-lg max-w-2xl mx-auto ${\r\n              darktheme ? \"text-gray-300\" : \"text-gray-600\"\r\n            }`}\r\n          >\r\n            {t(\"busMap.pageDescription\")}\r\n          </p>\r\n        </div>\r\n\r\n        {/* Controls Section */}\r\n        <div\r\n          className={`rounded-2xl shadow-xl p-6 mb-6 ${\r\n            darktheme\r\n              ? \"bg-gray-800 border border-gray-700\"\r\n              : \"bg-white border border-green-100\"\r\n          }`}\r\n        >\r\n          <div className=\"flex flex-wrap items-center justify-between gap-4\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <div\r\n                className={`flex items-center text-sm ${\r\n                  darktheme ? \"text-gray-300\" : \"text-gray-600\"\r\n                }`}\r\n              >\r\n                <MapPin className=\"w-4 h-4 mr-1 text-green-500\" />\r\n                <span className=\"font-medium\">{busLocations.length}</span> {t(\"busMap.busesTracked\")}\r\n              </div>\r\n              {lastUpdated && (\r\n                <div\r\n                  className={`flex items-center text-sm ${\r\n                    darktheme ? \"text-gray-400\" : \"text-gray-500\"\r\n                  }`}\r\n                >\r\n                  <Clock className=\"w-4 h-4 mr-1\" />\r\n                  {t(\"busMap.lastUpdated\")} {lastUpdated.toLocaleTimeString()}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"flex items-center space-x-2\">\r\n              <button\r\n                onClick={handleGetCurrentLocation}\r\n                className=\"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors duration-200 flex items-center text-sm\"\r\n              >\r\n                <Locate className=\"w-4 h-4 mr-1\" />\r\n                {t(\"busMap.myLocation\")}\r\n              </button>\r\n\r\n              <button\r\n                onClick={handleRefresh}\r\n                disabled={isLoading}\r\n                className={`px-4 py-2 rounded-lg transition-colors duration-200 flex items-center text-sm ${\r\n                  isLoading\r\n                    ? \"bg-gray-300 text-gray-500 cursor-not-allowed\"\r\n                    : \"bg-green-500 text-white hover:bg-green-600\"\r\n                }`}\r\n              >\r\n                <RefreshCw\r\n                  className={`w-4 h-4 mr-1 ${isLoading ? \"animate-spin\" : \"\"}`}\r\n                />\r\n                {isLoading ? t(\"busMap.refreshing\") : t(\"busMap.refresh\")}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Error Messages */}\r\n        {error && (\r\n          <div\r\n            className={`rounded-xl p-4 mb-6 ${\r\n              darktheme\r\n                ? \"bg-red-900/50 border border-red-800\"\r\n                : \"bg-red-50 border border-red-200\"\r\n            }`}\r\n          >\r\n            <div className=\"flex items-start\">\r\n              <AlertTriangle className=\"w-5 h-5 text-red-500 mt-0.5 mr-3 flex-shrink-0\" />\r\n              <div>\r\n                <h3\r\n                  className={`font-medium mb-1 ${\r\n                    darktheme ? \"text-red-300\" : \"text-red-800\"\r\n                  }`}\r\n                >\r\n                  {t(\"busMap.error\")}\r\n                </h3>\r\n                <p\r\n                  className={`text-sm ${\r\n                    darktheme ? \"text-red-400\" : \"text-red-700\"\r\n                  }`}\r\n                >\r\n                  {error}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {locationError && (\r\n          <div\r\n            className={`rounded-xl p-4 mb-6 ${\r\n              darktheme\r\n                ? \"bg-yellow-900/50 border border-yellow-800\"\r\n                : \"bg-yellow-50 border border-yellow-200\"\r\n            }`}\r\n          >\r\n            <div className=\"flex items-start\">\r\n              <AlertTriangle className=\"w-5 h-5 text-yellow-500 mt-0.5 mr-3 flex-shrink-0\" />\r\n              <div>\r\n                <h3\r\n                  className={`font-medium mb-1 ${\r\n                    darktheme ? \"text-yellow-300\" : \"text-yellow-800\"\r\n                  }`}\r\n                >\r\n                  {t(\"busMap.locationNotice\")}\r\n                </h3>\r\n                <p\r\n                  className={`text-sm ${\r\n                    darktheme ? \"text-yellow-400\" : \"text-yellow-700\"\r\n                  }`}\r\n                >\r\n                  {locationError}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Map Container */}\r\n        <div\r\n          className={`rounded-2xl shadow-xl overflow-hidden ${\r\n            darktheme\r\n              ? \"bg-gray-800 border border-gray-700\"\r\n              : \"bg-white border border-green-100\"\r\n          }`}\r\n        >\r\n          <div className=\"relative\">\r\n            {isLoading && (\r\n              <div\r\n                className={`absolute top-4 left-4 z-[1000] rounded-lg shadow-lg px-3 py-2 flex items-center ${\r\n                  darktheme ? \"bg-gray-800 border border-gray-700\" : \"bg-white\"\r\n                }`}\r\n              >\r\n                <RefreshCw className=\"w-4 h-4 mr-2 animate-spin text-green-500\" />\r\n                <span\r\n                  className={`text-sm ${\r\n                    darktheme ? \"text-gray-300\" : \"text-gray-600\"\r\n                  }`}\r\n                >\r\n                  {t(\"busMap.loadingBuses\")}\r\n                </span>\r\n              </div>\r\n            )}\r\n\r\n            <MapContainer\r\n              center={userLocation}\r\n              zoom={13}\r\n              scrollWheelZoom={true}\r\n              style={{ height: \"600px\", width: \"100%\" }}\r\n              className=\"rounded-2xl\"\r\n            >\r\n              <TileLayer\r\n                url={\r\n                  darktheme\r\n                    ? \"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png\"\r\n                    : \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n                }\r\n                attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n              />\r\n\r\n              {/* User Marker */}\r\n              <Marker position={userLocation} icon={createUserIcon()}>\r\n                <Popup className=\"custom-popup\">\r\n                  <div className=\"p-2\">\r\n                    <h3 className=\"font-bold text-blue-600 mb-1\">\r\n                      üìç {t(\"busMap.yourLocation\")}\r\n                    </h3>\r\n                    <p className=\"text-sm text-gray-600\">{t(\"busMap.youAreHere\")}</p>\r\n                  </div>\r\n                </Popup>\r\n              </Marker>\r\n\r\n              {/* Bus Markers */}\r\n              {busLocations.map((bus, index) => {\r\n                const lastUpdatedTime = new Date(bus.location.lastUpdated);\r\n                const now = new Date();\r\n                const minutesAgo = Math.floor(\r\n                  (now - lastUpdatedTime) / (1000 * 60)\r\n                );\r\n                const isRecent = minutesAgo < 10; // Consider bus active if updated within 10 minutes\r\n\r\n                return (\r\n                  <Marker\r\n                    key={bus.deviceID || index}\r\n                    position={[\r\n                      bus.location.coordinates[0],\r\n                      bus.location.coordinates[1],\r\n                    ]}\r\n                    icon={createBusIcon(isRecent)}\r\n                  >\r\n                    <Popup className=\"custom-popup\" maxWidth={300}>\r\n                      <div className=\"p-3\">\r\n                        <h3 className=\"font-bold text-green-600 mb-3 text-lg flex items-center\">\r\n                          üöå {bus.deviceID}\r\n                          {!isRecent && (\r\n                            <span className=\"ml-2 px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full\">\r\n                              {t(\"busMap.inactive\")}\r\n                            </span>\r\n                          )}\r\n                        </h3>\r\n\r\n                        <div className=\"space-y-2 text-sm\">\r\n                          <div className=\"flex items-start\">\r\n                            <Route className=\"w-4 h-4 text-purple-500 mr-2 mt-0.5 flex-shrink-0\" />\r\n                            <div>\r\n                              <span className=\"font-medium text-gray-700\">\r\n                                {t(\"busMap.route\")}\r\n                              </span>\r\n                              <p className=\"text-gray-600\">\r\n                                {bus.from} ‚Üí {bus.to}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n\r\n                          {bus.driver && (\r\n                            <div className=\"flex items-start\">\r\n                              <User className=\"w-4 h-4 text-blue-500 mr-2 mt-0.5 flex-shrink-0\" />\r\n                              <div>\r\n                                <span className=\"font-medium text-gray-700\">\r\n                                  {t(\"busMap.driver\")}\r\n                                </span>\r\n                                <p className=\"text-gray-600\">\r\n                                  {bus.driver.name} ({bus.driver.experience})\r\n                                </p>\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n\r\n                          <div className=\"flex items-start\">\r\n                            <Clock className=\"w-4 h-4 text-orange-500 mr-2 mt-0.5 flex-shrink-0\" />\r\n                            <div>\r\n                              <span className=\"font-medium text-gray-700\">\r\n                                {t(\"busMap.lastUpdated\")}\r\n                              </span>\r\n                              <p className=\"text-gray-600\">\r\n                                {minutesAgo === 0\r\n                                  ? t(\"busMap.justNow\")\r\n                                  : `${minutesAgo} ${t(\"busMap.minAgo\")}`}\r\n                              </p>\r\n                              <p className=\"text-xs text-gray-500\">\r\n                                {lastUpdatedTime.toLocaleString()}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div className=\"flex items-start\">\r\n                            <Navigation className=\"w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0\" />\r\n                            <div>\r\n                              <span className=\"font-medium text-gray-700\">\r\n                                {t(\"busMap.coordinates\")}\r\n                              </span>\r\n                              <p className=\"text-gray-600 font-mono text-xs\">\r\n                                {bus.location.coordinates.join(\", \")}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"mt-3 pt-2 border-t border-gray-200\">\r\n                          <button\r\n                            className=\"w-full bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-lg text-sm font-medium transition-colors duration-200\"\r\n                            onClick={() => navigate(`/bus/${bus.deviceID}`)}\r\n                          >\r\n                            {t(\"busMap.trackThisBus\")}\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </Popup>\r\n                  </Marker>\r\n                );\r\n              })}\r\n            </MapContainer>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Legend */}\r\n        <div\r\n          className={`rounded-2xl shadow-lg p-6 mt-6 ${\r\n            darktheme\r\n              ? \"bg-gray-800 border border-gray-700\"\r\n              : \"bg-white border border-green-100\"\r\n          }`}\r\n        >\r\n          <h3\r\n            className={`text-lg font-bold mb-4 ${\r\n              darktheme ? \"text-white\" : \"text-gray-800\"\r\n            }`}\r\n          >\r\n            {t(\"busMap.mapLegend\")}\r\n          </h3>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <div className=\"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm\">\r\n                üìç\r\n              </div>\r\n              <div>\r\n                <p\r\n                  className={`font-medium ${\r\n                    darktheme ? \"text-gray-200\" : \"text-gray-700\"\r\n                  }`}\r\n                >\r\n                  {t(\"busMap.yourLocation\")}\r\n                </p>\r\n                <p\r\n                  className={`text-sm ${\r\n                    darktheme ? \"text-gray-400\" : \"text-gray-500\"\r\n                  }`}\r\n                >\r\n                  {t(\"busMap.currentGPS\")}\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center space-x-3\">\r\n              <div className=\"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white text-sm\">\r\n                üöå\r\n              </div>\r\n              <div>\r\n                <p\r\n                  className={`font-medium ${\r\n                    darktheme ? \"text-gray-200\" : \"text-gray-700\"\r\n                  }`}\r\n                >\r\n                  {t(\"busMap.activeBus\")}\r\n                </p>\r\n                <p\r\n                  className={`text-sm ${\r\n                    darktheme ? \"text-gray-400\" : \"text-gray-500\"\r\n                  }`}\r\n                >\r\n                  {t(\"busMap.activeBusDescription\")}\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center space-x-3\">\r\n              <div className=\"w-8 h-8 bg-gray-500 rounded-full flex items-center justify-center text-white text-sm\">\r\n                üöå\r\n              </div>\r\n              <div>\r\n                <p\r\n                  className={`font-medium ${\r\n                    darktheme ? \"text-gray-200\" : \"text-gray-700\"\r\n                  }`}\r\n                >\r\n                  {t(\"busMap.inactiveBus\")}\r\n                </p>\r\n                <p\r\n                  className={`text-sm ${\r\n                    darktheme ? \"text-gray-400\" : \"text-gray-500\"\r\n                  }`}\r\n                >\r\n                  {t(\"busMap.inactiveBusDescription\")}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <footer\r\n          className={`mt-16 text-center text-sm ${\r\n            darktheme ? \"text-gray-400\" : \"text-gray-500\"\r\n          }`}\r\n        >\r\n          <p>{t(\"busMap.footer\")}</p>\r\n        </footer>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BusMap;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\BusSearch.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\Complete.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'driverExp' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":15,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"driverExp"},"fix":{"range":[532,541],"text":""},"desc":"Remove unused variable 'driverExp'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setdriverExp' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":15,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"setdriverExp"},"fix":{"range":[541,555],"text":""},"desc":"Remove unused variable 'setdriverExp'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'licenceId' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":16,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"licenceId"},"fix":{"range":[583,592],"text":""},"desc":"Remove unused variable 'licenceId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setlicenceId' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":16,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"setlicenceId"},"fix":{"range":[592,606],"text":""},"desc":"Remove unused variable 'setlicenceId'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'dispatch'. Either include it or remove the dependency array.","line":42,"column":6,"nodeType":"ArrayExpression","endLine":42,"endColumn":46,"suggestions":[{"desc":"Update the dependencies array to be: [dispatch, getAccessTokenSilently, navigate, user]","fix":{"range":[1398,1438],"text":"[dispatch, getAccessTokenSilently, navigate, user]"}}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { setuser } from \"../../Redux/auth.reducer\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { toast } from \"sonner\";\r\n\r\nconst Complete = () => {\r\n  const navigate = useNavigate();\r\n  const { getAccessTokenSilently, user } = useAuth0();\r\n  const [driverExp, setdriverExp] = useState(\"\");\r\n  const [licenceId, setlicenceId] = useState(\"\");\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      if (!user) return;\r\n      try {\r\n        const res = await axios.get(\r\n          `${import.meta.env.VITE_BASE_URL}/driver/veryfi/email/${user.email}`\r\n        );\r\n        dispatch(setuser(res.data.newUser));\r\n        if (res.data.success) {\r\n          navigate(\"/\"); // already registered driver\r\n        }\r\n        toast(res.data.message);\r\n      } catch (error) {\r\n        console.log(\r\n          \"Verification error:\",\r\n          error.response?.data || error.message\r\n        );\r\n        const errorMessage =\r\n          error.response?.data?.message || error.message || \"An error occurred\";\r\n        toast.error(errorMessage);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, [getAccessTokenSilently, navigate, user]);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"flex justify-center items-center absolute inset-0 gap-3 shadow-2xl \">\r\n        <Button\r\n          onClick={() => navigate(\"/Login/driver\")}\r\n          className=\"bg-green-500 hover:bg-green-600 cursor-pointer shadow-2xl\"\r\n        >\r\n          login as driver\r\n        </Button>\r\n\r\n        <Button\r\n          onClick={() => navigate(\"/Login/User\")}\r\n          className=\"bg-green-500 hover:bg-green-600 cursor-pointer shadow-2xl\"\r\n        >\r\n          login as User\r\n        </Button>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Complete;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\CreateBus.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useRef' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":1,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"useRef"},"fix":{"range":[24,32],"text":""},"desc":"Remove unused variable 'useRef'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":319,"column":54,"nodeType":"Identifier","messageId":"unusedVar","endLine":319,"endColumn":59,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[11643,11650],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":400,"column":52,"nodeType":"Identifier","messageId":"unusedVar","endLine":400,"endColumn":57,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[15291,15298],"text":""},"desc":"Remove unused variable 'index'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Navbar from \"../shared/Navbar\";\r\nimport { toast } from \"sonner\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nconst CreateBus = () => {\r\n  const { getAccessTokenSilently } = useAuth0();\r\n  const { darktheme } = useSelector((store) => store.auth);\r\n  const { t } = useTranslation();\r\n  const [deviceID, setDeviceID] = useState(\"\");\r\n  const [ticketPrice, setticketPrice] = useState(\"\");\r\n  const [to, setTo] = useState(\"\");\r\n  const [from, setFrom] = useState(\"\");\r\n  const [name, setName] = useState(\"\");\r\n  const [timeSlots, setTimeSlots] = useState([{ startTime: \"\", endTime: \"\" }]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [success, setSuccess] = useState(null);\r\n\r\n  // Separate states for \"From\" search\r\n  const [fromSearchQuery, setFromSearchQuery] = useState(\"\");\r\n  const [fromSuggestions, setFromSuggestions] = useState([]);\r\n  const [showFromSuggestions, setShowFromSuggestions] = useState(false);\r\n\r\n  // Separate states for \"To\" search\r\n  const [toSearchQuery, setToSearchQuery] = useState(\"\");\r\n  const [toSuggestions, setToSuggestions] = useState([]);\r\n  const [showToSuggestions, setShowToSuggestions] = useState(false);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const handleTimeSlotChange = (index, field, value) => {\r\n    const updatedSlots = [...timeSlots];\r\n    updatedSlots[index][field] = value;\r\n    setTimeSlots(updatedSlots);\r\n  };\r\n\r\n  const addTimeSlot = () => {\r\n    setTimeSlots([...timeSlots, { startTime: \"\", endTime: \"\" }]);\r\n  };\r\n\r\n  const removeTimeSlot = (index) => {\r\n    const updatedSlots = timeSlots.filter((_, i) => i !== index);\r\n    setTimeSlots(updatedSlots);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setSuccess(null);\r\n\r\n    try {\r\n      const token = await getAccessTokenSilently({\r\n        audience: \"http://localhost:5000/api/v3\",\r\n      });\r\n\r\n      const res = await axios.post(\r\n        `${import.meta.env.VITE_BASE_URL}/Bus/createbus`,\r\n        { name, deviceID, from, to, timeSlots, ticketPrice },\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n\r\n      setSuccess(t(\"createBus.successMessage\"));\r\n      setDeviceID(\"\");\r\n      setFrom(\"\");\r\n      setTo(\"\");\r\n      setName(\"\");\r\n      setFromSearchQuery(\"\");\r\n      setToSearchQuery(\"\");\r\n      setTimeSlots([{ startTime: \"\", endTime: \"\" }]);\r\n      toast(res.data.message);\r\n      navigate(\"/Bus\");\r\n    } catch (error) {\r\n      console.error(\"Error creating bus:\", error);\r\n      setSuccess(t(\"createBus.errorMessage\"));\r\n      const errorMessage =\r\n        error.response?.data?.message || error.message || t(\"createBus.genericError\");\r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Handle \"From\" search\r\n  const handleFromSearchChange = async (e) => {\r\n    const value = e.target.value;\r\n    setFromSearchQuery(value);\r\n\r\n    if (value.length < 3) {\r\n      setFromSuggestions([]);\r\n      setShowFromSuggestions(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(\r\n        `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(\r\n          value\r\n        )}&addressdetails=1&limit=5`\r\n      );\r\n      const data = await res.json();\r\n      setFromSuggestions(data);\r\n      setShowFromSuggestions(true);\r\n    } catch (error) {\r\n      console.error(\"Search failed:\", error);\r\n    }\r\n  };\r\n\r\n  // Handle \"To\" search\r\n  const handleToSearchChange = async (e) => {\r\n    const value = e.target.value;\r\n    setToSearchQuery(value);\r\n\r\n    if (value.length < 3) {\r\n      setToSuggestions([]);\r\n      setShowToSuggestions(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(\r\n        `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(\r\n          value\r\n        )}&addressdetails=1&limit=5`\r\n      );\r\n      const data = await res.json();\r\n      setToSuggestions(data);\r\n      setShowToSuggestions(true);\r\n    } catch (error) {\r\n      console.error(\"Search failed:\", error);\r\n    }\r\n  };\r\n\r\n  // Handle \"From\" suggestion click\r\n  const handleFromSuggestionClick = (place) => {\r\n    setFrom(place.display_name);\r\n    setFromSearchQuery(place.display_name);\r\n    setFromSuggestions([]);\r\n    setShowFromSuggestions(false);\r\n  };\r\n\r\n  // Handle \"To\" suggestion click\r\n  const handleToSuggestionClick = (place) => {\r\n    setTo(place.display_name);\r\n    setToSearchQuery(place.display_name);\r\n    setToSuggestions([]);\r\n    setShowToSuggestions(false);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`min-h-screen ${\r\n        darktheme\r\n          ? \"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900\"\r\n          : \"bg-gradient-to-br from-green-50 via-white to-green-100\"\r\n      }`}\r\n    >\r\n      <Navbar />\r\n\r\n      <main className=\"max-w-7xl mx-auto px-4 py-8\">\r\n        <Card\r\n          className={`max-w-md mx-auto mt-6 shadow-xl rounded-2xl border ${\r\n            darktheme\r\n              ? \"bg-gray-800 border-gray-700\"\r\n              : \"bg-white border-green-100\"\r\n          }`}\r\n        >\r\n          <CardHeader>\r\n            <CardTitle\r\n              className={`text-2xl font-bold text-center ${\r\n                darktheme ? \"text-white\" : \"text-gray-800\"\r\n              }`}\r\n            >\r\n              {t(\"createBus.pageTitle\")}\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <form className=\"space-y-4\" onSubmit={handleSubmit}>\r\n              {/* Bus Name */}\r\n              <div>\r\n                <Label\r\n                  htmlFor=\"name\"\r\n                  className={`block text-sm font-medium mb-2 ${\r\n                    darktheme ? \"text-gray-300\" : \"text-gray-700\"\r\n                  }`}\r\n                >\r\n                  {t(\"createBus.busName\")}\r\n                </Label>\r\n                <Input\r\n                  id=\"name\"\r\n                  value={name}\r\n                  onChange={(e) => setName(e.target.value)}\r\n                  placeholder={t(\"createBus.busNamePlaceholder\")}\r\n                  className={`w-full p-4 border rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all ${\r\n                    darktheme\r\n                      ? \"bg-gray-700 border-gray-600 text-white placeholder-gray-400\"\r\n                      : \"bg-white border-gray-300 text-gray-900\"\r\n                  }`}\r\n                  required\r\n                />\r\n              </div>\r\n\r\n              {/* Device ID */}\r\n              <div>\r\n                <Label\r\n                  htmlFor=\"deviceID\"\r\n                  className={`block text-sm font-medium mb-2 ${\r\n                    darktheme ? \"text-gray-300\" : \"text-gray-700\"\r\n                  }`}\r\n                >\r\n                  {t(\"createBus.deviceID\")}\r\n                </Label>\r\n                <Input\r\n                  id=\"deviceID\"\r\n                  value={deviceID}\r\n                  onChange={(e) => setDeviceID(e.target.value)}\r\n                  placeholder={t(\"createBus.deviceIDPlaceholder\")}\r\n                  className={`w-full p-4 border rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all ${\r\n                    darktheme\r\n                      ? \"bg-gray-700 border-gray-600 text-white placeholder-gray-400\"\r\n                      : \"bg-white border-gray-300 text-gray-900\"\r\n                  }`}\r\n                  required\r\n                />\r\n              </div>\r\n\r\n              {/* Ticket Price */}\r\n              <div>\r\n                <Label\r\n                  htmlFor=\"ticket-Price\"\r\n                  className={`block text-sm font-medium mb-2 ${\r\n                    darktheme ? \"text-gray-300\" : \"text-gray-700\"\r\n                  }`}\r\n                >\r\n                  {t(\"createBus.ticketPrice\")}\r\n                </Label>\r\n                <Input\r\n                  id=\"ticket-Price\"\r\n                  value={ticketPrice}\r\n                  onChange={(e) => setticketPrice(e.target.value)}\r\n                  placeholder={t(\"createBus.ticketPricePlaceholder\")}\r\n                  className={`w-full p-4 border rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all ${\r\n                    darktheme\r\n                      ? \"bg-gray-700 border-gray-600 text-white placeholder-gray-400\"\r\n                      : \"bg-white border-gray-300 text-gray-900\"\r\n                  }`}\r\n                  required\r\n                />\r\n              </div>\r\n\r\n              {/* From Location */}\r\n              <div>\r\n                <div\r\n                  className={`rounded-2xl p-6 shadow-lg border ${\r\n                    darktheme\r\n                      ? \"bg-gray-700 border-gray-600\"\r\n                      : \"bg-white border-gray-200\"\r\n                  }`}\r\n                >\r\n                  <div className=\"flex items-center gap-2 mb-5\">\r\n                    <span className=\"text-xl\">üîç</span>\r\n                    <h2\r\n                      className={`text-xl font-bold ${\r\n                        darktheme ? \"text-white\" : \"text-gray-800\"\r\n                      }`}\r\n                    >\r\n                      {t(\"createBus.from\")}\r\n                    </h2>\r\n                  </div>\r\n\r\n                  <div className=\"relative\">\r\n                    <input\r\n                      type=\"text\"\r\n                      value={fromSearchQuery}\r\n                      onChange={handleFromSearchChange}\r\n                      placeholder={t(\"createBus.fromPlaceholder\")}\r\n                      className={`w-full border-2 p-4 pr-12 rounded-xl focus:outline-none focus:border-blue-500 transition-all ${\r\n                        darktheme\r\n                          ? \"bg-gray-800 border-gray-600 text-white placeholder-gray-400\"\r\n                          : \"bg-white border-gray-200 text-gray-800 placeholder-gray-400\"\r\n                      }`}\r\n                      required\r\n                    />\r\n                    <div\r\n                      className={`absolute right-4 top-1/2 -translate-y-1/2 ${\r\n                        darktheme ? \"text-gray-500\" : \"text-gray-400\"\r\n                      }`}\r\n                    >\r\n                      <svg\r\n                        className=\"w-5 h-5\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        viewBox=\"0 0 24 24\"\r\n                      >\r\n                        <path\r\n                          strokeLinecap=\"round\"\r\n                          strokeLinejoin=\"round\"\r\n                          strokeWidth={2}\r\n                          d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\r\n                        />\r\n                      </svg>\r\n                    </div>\r\n\r\n                    {showFromSuggestions && fromSuggestions.length > 0 && (\r\n                      <ul\r\n                        className={`absolute border-2 rounded-xl shadow-2xl w-full mt-2 max-h-64 overflow-y-auto z-50 ${\r\n                          darktheme\r\n                            ? \"bg-gray-800 border-gray-600\"\r\n                            : \"bg-white border-gray-200\"\r\n                        }`}\r\n                      >\r\n                        {fromSuggestions.map((place, index) => (\r\n                          <li\r\n                            key={place.place_id}\r\n                            onClick={() => handleFromSuggestionClick(place)}\r\n                            className={`p-4 cursor-pointer text-sm border-b last:border-b-0 flex items-start gap-3 transition-colors ${\r\n                              darktheme\r\n                                ? \"text-gray-200 border-gray-700 hover:bg-gray-700\"\r\n                                : \"text-gray-700 border-gray-100 hover:bg-gray-50\"\r\n                            }`}\r\n                          >\r\n                            <span className=\"text-lg mt-0.5\">üìç</span>\r\n                            <span className=\"flex-1\">{place.display_name}</span>\r\n                          </li>\r\n                        ))}\r\n                      </ul>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* To Location */}\r\n              <div>\r\n                <div\r\n                  className={`rounded-2xl p-6 shadow-lg border ${\r\n                    darktheme\r\n                      ? \"bg-gray-700 border-gray-600\"\r\n                      : \"bg-white border-gray-200\"\r\n                  }`}\r\n                >\r\n                  <div className=\"flex items-center gap-2 mb-5\">\r\n                    <span className=\"text-xl\">üîç</span>\r\n                    <h2\r\n                      className={`text-xl font-bold ${\r\n                        darktheme ? \"text-white\" : \"text-gray-800\"\r\n                      }`}\r\n                    >\r\n                      {t(\"createBus.to\")}\r\n                    </h2>\r\n                  </div>\r\n\r\n                  <div className=\"relative\">\r\n                    <input\r\n                      type=\"text\"\r\n                      value={toSearchQuery}\r\n                      onChange={handleToSearchChange}\r\n                      placeholder={t(\"createBus.toPlaceholder\")}\r\n                      className={`w-full border-2 p-4 pr-12 rounded-xl focus:outline-none focus:border-blue-500 transition-all ${\r\n                        darktheme\r\n                          ? \"bg-gray-800 border-gray-600 text-white placeholder-gray-400\"\r\n                          : \"bg-white border-gray-200 text-gray-800 placeholder-gray-400\"\r\n                      }`}\r\n                      required\r\n                    />\r\n                    <div\r\n                      className={`absolute right-4 top-1/2 -translate-y-1/2 ${\r\n                        darktheme ? \"text-gray-500\" : \"text-gray-400\"\r\n                      }`}\r\n                    >\r\n                      <svg\r\n                        className=\"w-5 h-5\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        viewBox=\"0 0 24 24\"\r\n                      >\r\n                        <path\r\n                          strokeLinecap=\"round\"\r\n                          strokeLinejoin=\"round\"\r\n                          strokeWidth={2}\r\n                          d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\r\n                        />\r\n                      </svg>\r\n                    </div>\r\n\r\n                    {showToSuggestions && toSuggestions.length > 0 && (\r\n                      <ul\r\n                        className={`absolute border-2 rounded-xl shadow-2xl w-full mt-2 max-h-64 overflow-y-auto z-50 ${\r\n                          darktheme\r\n                            ? \"bg-gray-800 border-gray-600\"\r\n                            : \"bg-white border-gray-200\"\r\n                        }`}\r\n                      >\r\n                        {toSuggestions.map((place, index) => (\r\n                          <li\r\n                            key={place.place_id}\r\n                            onClick={() => handleToSuggestionClick(place)}\r\n                            className={`p-4 cursor-pointer text-sm border-b last:border-b-0 flex items-start gap-3 transition-colors ${\r\n                              darktheme\r\n                                ? \"text-gray-200 border-gray-700 hover:bg-gray-700\"\r\n                                : \"text-gray-700 border-gray-100 hover:bg-gray-50\"\r\n                            }`}\r\n                          >\r\n                            <span className=\"text-lg mt-0.5\">üìç</span>\r\n                            <span className=\"flex-1\">{place.display_name}</span>\r\n                          </li>\r\n                        ))}\r\n                      </ul>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Time Slots */}\r\n              <div>\r\n                <Label\r\n                  className={`block text-sm font-medium mb-2 ${\r\n                    darktheme ? \"text-gray-300\" : \"text-gray-700\"\r\n                  }`}\r\n                >\r\n                  {t(\"createBus.timeSlots\")}\r\n                </Label>\r\n                {timeSlots.map((slot, index) => (\r\n                  <div key={index} className=\"flex gap-2 mb-2 items-center\">\r\n                    <Input\r\n                      type=\"time\"\r\n                      value={slot.startTime}\r\n                      onChange={(e) =>\r\n                        handleTimeSlotChange(index, \"startTime\", e.target.value)\r\n                      }\r\n                      required\r\n                      className={`flex-1 p-3 border rounded-xl ${\r\n                        darktheme\r\n                          ? \"bg-gray-700 border-gray-600 text-white\"\r\n                          : \"bg-white border-gray-300 text-gray-900\"\r\n                      }`}\r\n                    />\r\n                    <span\r\n                      className={darktheme ? \"text-gray-400\" : \"text-gray-600\"}\r\n                    >\r\n                      {t(\"createBus.to\")}\r\n                    </span>\r\n                    <Input\r\n                      type=\"time\"\r\n                      value={slot.endTime}\r\n                      onChange={(e) =>\r\n                        handleTimeSlotChange(index, \"endTime\", e.target.value)\r\n                      }\r\n                      required\r\n                      className={`flex-1 p-3 border rounded-xl ${\r\n                        darktheme\r\n                          ? \"bg-gray-700 border-gray-600 text-white\"\r\n                          : \"bg-white border-gray-300 text-gray-900\"\r\n                      }`}\r\n                    />\r\n                    {timeSlots.length > 1 && (\r\n                      <Button\r\n                        type=\"button\"\r\n                        onClick={() => removeTimeSlot(index)}\r\n                        className=\"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-lg\"\r\n                      >\r\n                        {t(\"createBus.remove\")}\r\n                      </Button>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n                <Button\r\n                  type=\"button\"\r\n                  onClick={addTimeSlot}\r\n                  className=\"mt-2 w-full bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-xl\"\r\n                >\r\n                  {t(\"createBus.addTimeSlot\")}\r\n                </Button>\r\n              </div>\r\n\r\n              {/* Submit */}\r\n              <Button\r\n                type=\"submit\"\r\n                disabled={loading}\r\n                className=\"w-full px-8 py-4 rounded-xl font-medium transition-all duration-300 shadow-lg bg-gradient-to-r from-green-500 to-green-600 text-white hover:from-green-600 hover:to-green-700 hover:shadow-xl disabled:bg-gray-300 disabled:text-gray-500\"\r\n              >\r\n                {loading ? t(\"createBus.creating\") : t(\"createBus.createButton\")}\r\n              </Button>\r\n            </form>\r\n\r\n            {success && (\r\n              <p\r\n                className={`mt-4 text-center font-medium ${\r\n                  darktheme ? \"text-green-400\" : \"text-green-700\"\r\n                }`}\r\n              >\r\n                {success}\r\n              </p>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Footer */}\r\n        <footer className=\"mt-16 text-center text-sm\">\r\n          <p className={darktheme ? \"text-gray-500\" : \"text-gray-500\"}>\r\n            {t(\"createBus.footer\")}\r\n          </p>\r\n        </footer>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateBus;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\DriverLogin.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\FllowBusMap.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\History.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\Home.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\LocationTracker.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\MicInput.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\MyTickets.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\NearbyPOIMap.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\Profile.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'isEditing' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":31,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"isEditing"},"fix":{"range":[935,944],"text":""},"desc":"Remove unused variable 'isEditing'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setName' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":32,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"setName"},"fix":{"range":[993,1002],"text":""},"desc":"Remove unused variable 'setName'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setLicenceId' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":33,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"setLicenceId"},"fix":{"range":[1054,1068],"text":""},"desc":"Remove unused variable 'setLicenceId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setDriverExp' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":34,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"setDriverExp"},"fix":{"range":[1125,1139],"text":""},"desc":"Remove unused variable 'setDriverExp'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loading' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":35,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"loading"},"fix":{"range":[1187,1194],"text":""},"desc":"Remove unused variable 'loading'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'message' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":36,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"message"},"fix":{"range":[1237,1244],"text":""},"desc":"Remove unused variable 'message'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'handleUpdate' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":62,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":62,"endColumn":21}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\r\nimport { Avatar, AvatarImage, AvatarFallback } from \"@/components/ui/avatar\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  User,\r\n  CreditCard,\r\n  Calendar,\r\n  Mail,\r\n  Shield,\r\n  Edit3,\r\n  Save,\r\n  X,\r\n  Clock,\r\n  Hash,\r\n} from \"lucide-react\";\r\nimport axios from \"axios\";\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { setuser } from \"../../Redux/auth.reducer\";\r\nimport Navbar from \"../shared/Navbar\";\r\nimport { toast } from \"sonner\";\r\n\r\nconst Profile = () => {\r\n  const { usere, darktheme } = useSelector((store) => store.auth);\r\n  const { getAccessTokenSilently } = useAuth0();\r\n  const { t } = useTranslation();\r\n\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [name, setName] = useState(usere?.name || \"\");\r\n  const [licenceId, setLicenceId] = useState(usere?.licenceId || \"\");\r\n  const [driverExp, setDriverExp] = useState(usere?.driverExp || \"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState(\"\");\r\n  const dispatch = useDispatch();\r\n\r\n  if (!usere) {\r\n    return (\r\n      <div\r\n        className={`min-h-screen ${\r\n          darktheme\r\n            ? \"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900\"\r\n            : \"bg-gradient-to-br from-green-50 via-white to-green-100\"\r\n        }`}\r\n      >\r\n        <Navbar />\r\n        <div className=\"flex items-center justify-center py-16\">\r\n          <p\r\n            className={`text-center text-lg ${\r\n              darktheme ? \"text-gray-400\" : \"text-gray-600\"\r\n            }`}\r\n          >\r\n            {t(\"profile.noUserData\")}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const handleUpdate = async () => {\r\n    setLoading(true);\r\n    setMessage(\"\");\r\n    try {\r\n      const token = await getAccessTokenSilently({\r\n        audience: \"http://localhost:5000/api/v3\",\r\n      });\r\n      console.log(token);\r\n      const res = await axios.put(\r\n        `${import.meta.env.VITE_BASE_URL}/driver/update/profile`,\r\n        { name, licenceId, driverExp },\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n      dispatch(setuser(res.data.newDetails));\r\n      setMessage(t(\"profile.updateSuccess\"));\r\n      setIsEditing(false);\r\n      toast(res.data.message);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setMessage(t(\"profile.updateFailed\"));\r\n      const errorMessage =\r\n        err.response?.data?.message || err.message || t(\"profile.updateError\");\r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`min-h-screen ${\r\n        darktheme\r\n          ? \"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900\"\r\n          : \"bg-gradient-to-br from-green-50 via-white to-green-100\"\r\n      }`}\r\n    >\r\n      <Navbar />\r\n\r\n      <main className=\"max-w-7xl mx-auto px-4 py-8\">\r\n        {/* Header Section */}\r\n\r\n        <div className=\"max-w-2xl mx-auto\">\r\n          <Card\r\n            className={`shadow-xl rounded-2xl border ${\r\n              darktheme\r\n                ? \"bg-gray-800/80 border-gray-700 backdrop-blur-sm\"\r\n                : \"bg-white/80 border-green-100 backdrop-blur-sm\"\r\n            }`}\r\n          >\r\n            {/* Profile Header */}\r\n            <CardHeader className=\"flex flex-col items-center space-y-4 pb-6\">\r\n              <div className=\"relative\">\r\n                <Avatar\r\n                  className={`w-32 h-32 border-4 shadow-lg ${\r\n                    darktheme ? \"border-green-700\" : \"border-green-200\"\r\n                  }`}\r\n                >\r\n                  {usere.picture ? (\r\n                    <AvatarImage\r\n                      src={usere.picture}\r\n                      alt={usere.name}\r\n                      className=\"object-cover\"\r\n                    />\r\n                  ) : (\r\n                    <AvatarFallback\r\n                      className={`text-3xl font-bold ${\r\n                        darktheme\r\n                          ? \"bg-green-900 text-green-400\"\r\n                          : \"bg-green-100 text-green-700\"\r\n                      }`}\r\n                    >\r\n                      {usere.name.charAt(0)}\r\n                    </AvatarFallback>\r\n                  )}\r\n                </Avatar>\r\n                <div\r\n                  className={`absolute -bottom-2 -right-2 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center border-4 ${\r\n                    darktheme ? \"border-gray-800\" : \"border-white\"\r\n                  }`}\r\n                >\r\n                  <User className=\"w-4 h-4 text-white\" />\r\n                </div>\r\n              </div>\r\n              <div className=\"text-center\">\r\n                <CardTitle\r\n                  className={`text-2xl font-bold mb-1 ${\r\n                    darktheme ? \"text-white\" : \"text-gray-800\"\r\n                  }`}\r\n                >\r\n                  {usere.name}\r\n                </CardTitle>\r\n                <div\r\n                  className={`flex items-center justify-center ${\r\n                    darktheme ? \"text-gray-400\" : \"text-gray-600\"\r\n                  }`}\r\n                >\r\n                  <Mail className=\"w-4 h-4 mr-2\" />\r\n                  <span>{usere.email}</span>\r\n                </div>\r\n              </div>\r\n            </CardHeader>\r\n          </Card>\r\n\r\n          {/* Additional Info Cards */}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <footer className=\"mt-16 text-center text-sm\">\r\n          <p className={darktheme ? \"text-gray-500\" : \"text-gray-500\"}>\r\n            {t(\"profile.copyright\")}\r\n          </p>\r\n        </footer>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\RazorpayPayment.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'toast' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":9,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"toast"},"fix":{"range":[370,401],"text":""},"desc":"Remove unused variable 'toast'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setBusId' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":210,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":210,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"setBusId"},"fix":{"range":[6566,6576],"text":""},"desc":"Remove unused variable 'setBusId'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \"react\";\r\nimport MicInput from \"./MicInput\";\r\nimport { MapContainer, Marker, TileLayer, useMapEvents } from \"react-leaflet\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport Navbar from \"../shared/Navbar\";\r\nimport { toast } from \"sonner\";\r\nimport { useSelector } from \"react-redux\";\r\nimport L from \"leaflet\";\r\n\r\nconst GEOCODE_API = \"https://nominatim.openstreetmap.org/search\";\r\nconst markerIcon = new L.Icon({\r\n  iconUrl: \"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png\",\r\n  iconSize: [25, 41],\r\n  iconAnchor: [12, 41],\r\n});\r\n\r\nconst LocationPicker = ({ onSelect }) => {\r\n  useMapEvents({\r\n    click(e) {\r\n      onSelect({ lat: e.latlng.lat, lon: e.latlng.lng });\r\n    },\r\n  });\r\n  return null;\r\n};\r\n\r\nconst PlaceSearch = ({ label, onSelect, enableUseMyLocation = false }) => {\r\n  const [query, setQuery] = useState(\"\");\r\n  const [suggestions, setSuggestions] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [loadingLocation, setLoadingLocation] = useState(false);\r\n  const [selectedPos, setSelectedPos] = useState(null);\r\n  const { darktheme } = useSelector((store) => store.auth);\r\n  const { t } = useTranslation();\r\n\r\n  const handleSearch = async (value) => {\r\n    setQuery(value);\r\n    if (value.length < 3) return setSuggestions([]);\r\n\r\n    try {\r\n      setLoading(true);\r\n      const res = await fetch(\r\n        `${GEOCODE_API}?q=${encodeURIComponent(value)}&format=json&limit=5`\r\n      );\r\n      const data = await res.json();\r\n      setSuggestions(data);\r\n    } catch (err) {\r\n      console.error(\"Geocode error:\", err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const reverseGeocode = async (lat, lon) => {\r\n    try {\r\n      const res = await fetch(\r\n        `${GEOCODE_API}?format=json&lat=${lat}&lon=${lon}&zoom=16&addressdetails=1`\r\n      );\r\n      const data = await res.json();\r\n      return data[0]?.display_name || `${lat}, ${lon}`;\r\n    } catch (err) {\r\n      console.error(\"Reverse geocoding failed\", err);\r\n      return `${lat}, ${lon}`;\r\n    }\r\n  };\r\n\r\n  const handleUseMyLocation = async () => {\r\n    if (!navigator.geolocation) {\r\n      alert(t(\"payment.geolocationNotSupported\"));\r\n      return;\r\n    }\r\n\r\n    setLoadingLocation(true);\r\n    navigator.geolocation.getCurrentPosition(\r\n      async (position) => {\r\n        const { latitude, longitude } = position.coords;\r\n        try {\r\n          const address = await reverseGeocode(latitude, longitude);\r\n\r\n          setQuery(address);\r\n          setSelectedPos({ lat: latitude, lon: longitude });\r\n          onSelect({ lat: latitude, lon: longitude, address });\r\n          setSuggestions([]);\r\n        } finally {\r\n          setLoadingLocation(false);\r\n        }\r\n      },\r\n      (err) => {\r\n        console.error(\"Geolocation error\", err);\r\n        alert(t(\"payment.unableToGetLocation\"));\r\n        setLoadingLocation(false);\r\n      }\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"mb-4 relative\">\r\n      <label\r\n        className={`block mb-1 font-medium ${\r\n          darktheme ? \"text-gray-300\" : \"text-gray-700\"\r\n        }`}\r\n      >\r\n        {label}\r\n      </label>\r\n\r\n      <MicInput\r\n        type=\"text\"\r\n        value={query}\r\n        placeholder={t(\"payment.typePlaceholder\")}\r\n        onChange={(e) => handleSearch(e.target.value)}\r\n        className={`border p-2 w-full rounded ${\r\n          darktheme\r\n            ? \"bg-gray-700 border-gray-600 text-white placeholder-gray-400\"\r\n            : \"bg-white border-gray-300 text-gray-900\"\r\n        }`}\r\n      />\r\n\r\n      {enableUseMyLocation && (\r\n        <button\r\n          type=\"button\"\r\n          className={`text-sm mt-1 underline ${\r\n            darktheme ? \"text-blue-400\" : \"text-blue-600\"\r\n          }`}\r\n          onClick={handleUseMyLocation}\r\n          disabled={loadingLocation}\r\n        >\r\n          {loadingLocation ? t(\"payment.gettingLocation\") : t(\"payment.useMyLocation\")}\r\n        </button>\r\n      )}\r\n\r\n      {loading && (\r\n        <p\r\n          className={`text-sm mt-1 ${\r\n            darktheme ? \"text-gray-500\" : \"text-gray-400\"\r\n          }`}\r\n        >\r\n          {t(\"payment.searching\")}\r\n        </p>\r\n      )}\r\n\r\n      {suggestions.length > 0 && (\r\n        <ul\r\n          className={`absolute z-10 w-full shadow rounded mt-1 max-h-40 overflow-y-auto ${\r\n            darktheme\r\n              ? \"bg-gray-800 border border-gray-600\"\r\n              : \"bg-white border border-gray-200\"\r\n          }`}\r\n        >\r\n          {suggestions.map((s, idx) => (\r\n            <li\r\n              key={idx}\r\n              className={`p-2 cursor-pointer text-sm ${\r\n                darktheme\r\n                  ? \"text-gray-200 hover:bg-gray-700\"\r\n                  : \"text-gray-900 hover:bg-gray-100\"\r\n              }`}\r\n              onClick={() => {\r\n                const pos = { lat: parseFloat(s.lat), lon: parseFloat(s.lon) };\r\n                setQuery(s.display_name);\r\n                setSelectedPos(pos);\r\n                onSelect({ ...pos, address: s.display_name });\r\n                setSuggestions([]);\r\n              }}\r\n            >\r\n              {s.display_name}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n\r\n      {selectedPos && (\r\n        <div className=\"mt-4 h-64\">\r\n          <MapContainer\r\n            center={[selectedPos.lat, selectedPos.lon]}\r\n            zoom={15}\r\n            style={{ height: \"100%\", width: \"100%\" }}\r\n          >\r\n            <TileLayer\r\n              url={\r\n                darktheme\r\n                  ? \"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png\"\r\n                  : \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n              }\r\n              attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n            />\r\n            <Marker\r\n              position={[selectedPos.lat, selectedPos.lon]}\r\n              icon={markerIcon}\r\n            />\r\n            <LocationPicker\r\n              onSelect={async (pos) => {\r\n                setSelectedPos(pos);\r\n                const address = await reverseGeocode(pos.lat, pos.lon);\r\n                setQuery(address);\r\n                onSelect({ ...pos, address });\r\n              }}\r\n            />\r\n          </MapContainer>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst RazorpayPayment = () => {\r\n  const [from, setFrom] = useState(null);\r\n  const [to, setTo] = useState(null);\r\n  const [busId, setBusId] = useState(\"BUS-111\");\r\n  const [ticketData, setTicketData] = useState(null);\r\n  const [loadingPrice, setLoadingPrice] = useState(false);\r\n  const { deviceid } = useParams();\r\n  const { getAccessTokenSilently } = useAuth0();\r\n  const { darktheme } = useSelector((store) => store.auth);\r\n  const { t } = useTranslation();\r\n\r\n  const handleCalculatePrice = async () => {\r\n    if (!from || !to) {\r\n      alert(t(\"payment.selectBothLocations\"));\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoadingPrice(true);\r\n\r\n      const res = await fetch(\r\n        `${import.meta.env.VITE_BASE_URL}/Bus/calculate/price`,\r\n        {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({\r\n            busId: deviceid,\r\n            fromLat: from.lat,\r\n            fromLng: from.lon,\r\n            toLat: to.lat,\r\n            toLng: to.lon,\r\n          }),\r\n        }\r\n      );\r\n      const data = await res.json();\r\n      if (data.success) {\r\n        setTicketData(data.data);\r\n      } else {\r\n        alert(t(\"payment.failedCalculatePrice\"));\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(t(\"payment.errorCalculatingPrice\"));\r\n    } finally {\r\n      setLoadingPrice(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className={`min-h-screen py-8 ${\r\n          darktheme\r\n            ? \"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900\"\r\n            : \"bg-gradient-to-br from-green-50 via-white to-green-100\"\r\n        }`}\r\n      >\r\n        <Navbar />\r\n        <div\r\n          className={`max-w-md mx-auto p-6 rounded-lg shadow-lg ${\r\n            darktheme\r\n              ? \"bg-gray-800 border border-gray-700\"\r\n              : \"bg-white border border-gray-200\"\r\n          }`}\r\n        >\r\n          <h2\r\n            className={`text-xl font-semibold mb-4 ${\r\n              darktheme ? \"text-white\" : \"text-gray-800\"\r\n            }`}\r\n          >\r\n            {t(\"payment.pageTitle\")}\r\n          </h2>\r\n\r\n          <div className=\"mb-6\">\r\n            <PlaceSearch\r\n              label={t(\"payment.from\")}\r\n              enableUseMyLocation={true}\r\n              onSelect={(place) => setFrom({ lat: place.lat, lon: place.lon })}\r\n            />\r\n            <PlaceSearch\r\n              label={t(\"payment.to\")}\r\n              onSelect={(place) => setTo({ lat: place.lat, lon: place.lon })}\r\n            />\r\n          </div>\r\n\r\n          <button\r\n            className={`w-full px-6 py-2 rounded-lg shadow-md mb-4 transition-colors ${\r\n              darktheme\r\n                ? \"bg-blue-600 hover:bg-blue-700 text-white\"\r\n                : \"bg-blue-500 hover:bg-blue-600 text-white\"\r\n            }`}\r\n            onClick={handleCalculatePrice}\r\n            disabled={loadingPrice}\r\n          >\r\n            {loadingPrice ? t(\"payment.calculating\") : t(\"payment.getTicketPrice\")}\r\n          </button>\r\n\r\n          {ticketData && (\r\n            <div\r\n              className={`p-4 rounded ${\r\n                darktheme\r\n                  ? \"bg-gray-700 border border-gray-600\"\r\n                  : \"bg-gray-100 border border-gray-200\"\r\n              }`}\r\n            >\r\n              <p className={darktheme ? \"text-gray-200\" : \"text-gray-800\"}>\r\n                <strong>{t(\"payment.fromIndex\")}</strong> {ticketData.fromIndex}\r\n              </p>\r\n              <p className={darktheme ? \"text-gray-200\" : \"text-gray-800\"}>\r\n                <strong>{t(\"payment.toIndex\")}</strong> {ticketData.toIndex}\r\n              </p>\r\n              <p className={darktheme ? \"text-gray-200\" : \"text-gray-800\"}>\r\n                <strong>{t(\"payment.totalDistance\")}</strong> {ticketData.totalDistance} {t(\"payment.km\")}\r\n              </p>\r\n              <p className={darktheme ? \"text-gray-200\" : \"text-gray-800\"}>\r\n                <strong>{t(\"payment.passengerDistance\")}</strong>{\" \"}\r\n                {ticketData.passengerDistance} {t(\"payment.km\")}\r\n              </p>\r\n              <p className={darktheme ? \"text-gray-200\" : \"text-gray-800\"}>\r\n                <strong>{t(\"payment.ticketPrice\")}</strong> ‚Çπ{ticketData.ticketPrice}\r\n              </p>\r\n              <p className={darktheme ? \"text-gray-200\" : \"text-gray-800\"}>\r\n                <strong>{t(\"payment.pricePerKm\")}</strong> ‚Çπ{ticketData.pricePerKm}\r\n              </p>\r\n\r\n              <button\r\n                className={`w-full px-6 py-2 rounded-lg shadow-md mt-4 transition-colors ${\r\n                  darktheme\r\n                    ? \"bg-green-600 hover:bg-green-700 text-white\"\r\n                    : \"bg-green-500 hover:bg-green-600 text-white\"\r\n                }`}\r\n                onClick={async () => {\r\n                  // Razorpay payment\r\n                  const res = await fetch(\r\n                    `${import.meta.env.VITE_BASE_URL}/Bus/create-order`,\r\n                    {\r\n                      method: \"POST\",\r\n                      headers: { \"Content-Type\": \"application/json\" },\r\n                      body: JSON.stringify({ amount: ticketData.ticketPrice }),\r\n                    }\r\n                  );\r\n                  const order = await res.json();\r\n\r\n                  const options = {\r\n                    key: \"rzp_test_RPcZFwp7G16Gjf\",\r\n                    amount: order.amount,\r\n                    currency: order.currency,\r\n                    name: t(\"payment.busTicketBooking\"),\r\n                    description: `${t(\"payment.ticketFor\")} ${busId}`,\r\n                    order_id: order.id,\r\n                    handler: async function (response) {\r\n                      const token = await getAccessTokenSilently({\r\n                        audience: \"http://localhost:5000/api/v3\",\r\n                      });\r\n                      const verifyRes = await axios.post(\r\n                        `${import.meta.env.VITE_BASE_URL}/Bus/verify-payment`,\r\n\r\n                        {\r\n                          razorpay_order_id: response.razorpay_order_id,\r\n                          razorpay_payment_id: response.razorpay_payment_id,\r\n                          razorpay_signature: response.razorpay_signature,\r\n                          ticketData,\r\n                          busId: deviceid,\r\n                          fromLat: from.lat,\r\n                          fromLng: from.lon,\r\n                          toLat: to.lat,\r\n                          toLng: to.lon,\r\n                        },\r\n                        { headers: { Authorization: `Bearer ${token}` } }\r\n                      );\r\n\r\n                      const verifyData = await verifyRes.json();\r\n                      alert(verifyData.message);\r\n                      console.log(\"‚úÖ Verify Response:\", verifyData);\r\n                    },\r\n\r\n                    prefill: {\r\n                      name: \"Ayan Manna\",\r\n                      email: \"mannaayan777@gmail.com\",\r\n                      contact: \"9907072795\",\r\n                    },\r\n                    theme: { color: \"#3399cc\" },\r\n                  };\r\n\r\n                  const rzp1 = new window.Razorpay(options);\r\n                  rzp1.open();\r\n                }}\r\n              >\r\n                {t(\"payment.pay\")} ‚Çπ{ticketData.ticketPrice}\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default RazorpayPayment;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\ReviewForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\SupportChat.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":31,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":17}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { MessageCircle, Send, Bot, User } from \"lucide-react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nconst SupportChat = () => {\r\n  const { darktheme } = useSelector((store) => store.auth);\r\n  const { t } = useTranslation();\r\n\r\n  // Initialize with a greeting message from the bot\r\n  const [messages, setMessages] = useState([\r\n    { sender: \"bot\", text: t(\"support.greeting\") },\r\n  ]);\r\n  const [input, setInput] = useState(\"\");\r\n\r\n  const sendMessage = async () => {\r\n    if (!input.trim()) return;\r\n\r\n    const userMsg = { sender: \"user\", text: input };\r\n    setMessages((prev) => [...prev, userMsg]);\r\n    setInput(\"\");\r\n\r\n    try {\r\n      const res = await axios.post(\r\n        `${import.meta.env.VITE_BASE_URL}/support/ask`,\r\n        { question: input }\r\n      );\r\n      const botMsg = { sender: \"bot\", text: res.data.answer };\r\n      setMessages((prev) => [...prev, botMsg]);\r\n    } catch (err) {\r\n      setMessages((prev) => [\r\n        ...prev,\r\n        {\r\n          sender: \"bot\",\r\n          text: t(\"support.errorMessage\"),\r\n        },\r\n      ]);\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      sendMessage();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`fixed bottom-4 right-4 w-96 shadow-xl rounded-2xl border overflow-hidden ${\r\n        darktheme ? \"bg-gray-800 border-gray-700\" : \"bg-white border-green-100\"\r\n      }`}\r\n    >\r\n      {/* Header */}\r\n      <div className=\"p-4 bg-gradient-to-r from-green-500 to-green-600 text-white flex items-center gap-3\">\r\n        <div className=\"w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center\">\r\n          <MessageCircle className=\"w-5 h-5\" />\r\n        </div>\r\n        <div>\r\n          <h3 className=\"font-bold text-lg\">{t(\"support.title\")}</h3>\r\n          <p className=\"text-xs text-green-50\">{t(\"support.subtitle\")}</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Messages */}\r\n      <div\r\n        className={`h-80 overflow-y-auto p-4 ${\r\n          darktheme\r\n            ? \"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900\"\r\n            : \"bg-gradient-to-br from-green-50 via-white to-green-50\"\r\n        }`}\r\n      >\r\n        {messages.map((m, i) => (\r\n          <div\r\n            key={i}\r\n            className={`mb-4 flex ${\r\n              m.sender === \"user\" ? \"justify-end\" : \"justify-start\"\r\n            }`}\r\n          >\r\n            <div\r\n              className={`flex items-start gap-2 max-w-[80%] ${\r\n                m.sender === \"user\" ? \"flex-row-reverse\" : \"flex-row\"\r\n              }`}\r\n            >\r\n              {/* Avatar */}\r\n              <div\r\n                className={`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${\r\n                  m.sender === \"user\"\r\n                    ? \"bg-gradient-to-br from-green-500 to-green-600\"\r\n                    : darktheme\r\n                    ? \"bg-gray-700\"\r\n                    : \"bg-gray-200\"\r\n                }`}\r\n              >\r\n                {m.sender === \"user\" ? (\r\n                  <User className=\"w-4 h-4 text-white\" />\r\n                ) : (\r\n                  <Bot\r\n                    className={`w-4 h-4 ${\r\n                      darktheme ? \"text-gray-300\" : \"text-gray-600\"\r\n                    }`}\r\n                  />\r\n                )}\r\n              </div>\r\n\r\n              {/* Message bubble */}\r\n              <div\r\n                className={`px-4 py-2.5 rounded-2xl shadow-sm ${\r\n                  m.sender === \"user\"\r\n                    ? \"bg-gradient-to-r from-green-500 to-green-600 text-white rounded-tr-sm\"\r\n                    : darktheme\r\n                    ? \"bg-gray-700 text-gray-200 border border-gray-600 rounded-tl-sm\"\r\n                    : \"bg-white text-gray-800 border border-gray-200 rounded-tl-sm\"\r\n                }`}\r\n              >\r\n                <p className=\"text-sm leading-relaxed\">{m.text}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Input */}\r\n      <div\r\n        className={`flex border-t p-3 gap-2 ${\r\n          darktheme\r\n            ? \"bg-gray-800 border-gray-700\"\r\n            : \"bg-white border-green-100\"\r\n        }`}\r\n      >\r\n        <input\r\n          type=\"text\"\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          onKeyPress={handleKeyPress}\r\n          placeholder={t(\"support.inputPlaceholder\")}\r\n          className={`flex-grow px-4 py-2.5 rounded-xl border-2 focus:border-green-500 focus:outline-none transition-all duration-300 ${\r\n            darktheme\r\n              ? \"bg-gray-700 border-gray-600 text-white placeholder-gray-400\"\r\n              : \"bg-white border-gray-200 text-gray-800 placeholder-gray-400\"\r\n          }`}\r\n        />\r\n        <button\r\n          onClick={sendMessage}\r\n          className=\"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-5 py-2.5 rounded-xl font-medium shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 flex items-center gap-2\"\r\n        >\r\n          <Send className=\"w-4 h-4\" />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SupportChat;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\SupportPopover.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\TicketDetails.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\UserLogin.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\page\\theme-toggle.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\shared\\LocationSearch.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'type' is defined but never used.","line":25,"column":49,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":53,"suggestions":[{"messageId":"removeVar","data":{"varName":"type"},"fix":{"range":[1139,1145],"text":""},"desc":"Remove unused variable 'type'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'selectedLang' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":412,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":412,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"selectedLang"},"fix":{"range":[12446,12458],"text":""},"desc":"Remove unused variable 'selectedLang'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'handleLanguageChange' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":439,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":439,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleLanguageChange"},"fix":{"range":[13495,13852],"text":""},"desc":"Remove unused variable 'handleLanguageChange'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'address' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":461,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":461,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"address"},"fix":{"range":[14147,14154],"text":""},"desc":"Remove unused variable 'address'."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// components/shared/LocationSearch.jsx - FIXED VERSION\r\nimport { useState, useEffect } from \"react\";\r\nimport { ArrowLeftRight, MapPin, Loader2, Navigation } from \"lucide-react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport useSpeechToText from \"../../hooks/useSpeechToText\";\r\nimport { geocodeAddress } from \"../../services/geocode\";\r\nimport { Mic, X } from \"lucide-react\";\r\n\r\nexport default function LocationSearch({\r\n  onCoordsSelect,\r\n  onLocationChange,\r\n  searchType = \"route\",\r\n}) {\r\n  const [fromLocation, setFromLocation] = useState(\"\");\r\n  const [toLocation, setToLocation] = useState(\"\");\r\n  const [fromSuggestions, setFromSuggestions] = useState([]);\r\n  const [toSuggestions, setToSuggestions] = useState([]);\r\n  const [fromCoords, setFromCoords] = useState(null);\r\n  const [toCoords, setToCoords] = useState(null);\r\n  const [isLoadingLocation, setIsLoadingLocation] = useState(false);\r\n  const [isLoadingSuggestions, setIsLoadingSuggestions] = useState(false);\r\n  const [activeInput, setActiveInput] = useState(null);\r\n\r\n  // Fetch address suggestions with debouncing\r\n  const fetchSuggestions = async (query, setFn, type) => {\r\n    if (query.length < 2) {\r\n      setFn([]);\r\n      return;\r\n    }\r\n\r\n    setIsLoadingSuggestions(true);\r\n    try {\r\n      const res = await fetch(\r\n        `${import.meta.env.VITE_BASE_URL}/search?q=${encodeURIComponent(query)}`\r\n      );\r\n      if (!res.ok) throw new Error(\"Failed to fetch suggestions\");\r\n      const data = await res.json();\r\n\r\n      console.log(\"Fetched suggestions:\", data);\r\n\r\n      if (!Array.isArray(data)) {\r\n        console.warn(\"Expected array, got:\", data);\r\n        throw new Error(\"Invalid API response\");\r\n      }\r\n\r\n      setFn(data.slice(0, 5));\r\n    } catch (error) {\r\n      console.error(\"Error fetching suggestions:\", error);\r\n      setFn([]);\r\n    } finally {\r\n      setIsLoadingSuggestions(false);\r\n    }\r\n  };\r\n\r\n  // Debounce function\r\n  const debounce = (func, delay) => {\r\n    let timeoutId;\r\n    return (...args) => {\r\n      clearTimeout(timeoutId);\r\n      timeoutId = setTimeout(() => func(...args), delay);\r\n    };\r\n  };\r\n\r\n  // Debounced fetch suggestions\r\n  const debouncedFetchSuggestions = debounce(fetchSuggestions, 300);\r\n\r\n  // Handle input changes\r\n  const handleFromLocationChange = (value) => {\r\n    setFromLocation(value);\r\n    setActiveInput(\"from\");\r\n    if (value.length >= 2) {\r\n      debouncedFetchSuggestions(value, setFromSuggestions, \"from\");\r\n    } else {\r\n      setFromSuggestions([]);\r\n    }\r\n  };\r\n\r\n  const handleToLocationChange = (value) => {\r\n    setToLocation(value);\r\n    setActiveInput(\"to\");\r\n    if (value.length >= 2) {\r\n      debouncedFetchSuggestions(value, setToSuggestions, \"to\");\r\n    } else {\r\n      setToSuggestions([]);\r\n    }\r\n  };\r\n\r\n  // FIXED: Select from suggestion with proper coordinate handling\r\n  const selectFrom = (place) => {\r\n    // FIXED: Ensure coordinates are properly formatted as numbers with correct naming\r\n    const coords = {\r\n      lat: parseFloat(place.lat),\r\n      lon: parseFloat(place.lon), // Use 'lon' not 'lng' to match backend\r\n    };\r\n\r\n    console.log(\"From coordinates selected:\", coords);\r\n\r\n    setFromLocation(place.display_name);\r\n    setFromCoords(coords);\r\n    setFromSuggestions([]);\r\n    setActiveInput(null);\r\n\r\n    // Notify parent component\r\n    if (onLocationChange) {\r\n      onLocationChange(\"from\", {\r\n        address: place.display_name,\r\n        coords: coords,\r\n        place: place,\r\n      });\r\n    }\r\n\r\n    // For route search, notify with both coordinates when both are available\r\n    if (searchType === \"route\" && onCoordsSelect) {\r\n      onCoordsSelect({\r\n        from: coords,\r\n        to: toCoords,\r\n        fromAddress: place.display_name,\r\n        toAddress: toLocation,\r\n      });\r\n    }\r\n\r\n    // For location search, notify immediately\r\n    if (searchType === \"location\" && onCoordsSelect) {\r\n      onCoordsSelect({\r\n        from: coords,\r\n        to: null,\r\n        fromAddress: place.display_name,\r\n        toAddress: \"\",\r\n      });\r\n    }\r\n  };\r\n\r\n  // FIXED: Select to suggestion with proper coordinate handling\r\n  const selectTo = (place) => {\r\n    // FIXED: Ensure coordinates are properly formatted as numbers with correct naming\r\n    const coords = {\r\n      lat: parseFloat(place.lat),\r\n      lon: parseFloat(place.lon), // Use 'lon' not 'lng' to match backend\r\n    };\r\n\r\n    console.log(\"To coordinates selected:\", coords);\r\n\r\n    setToLocation(place.display_name);\r\n    setToCoords(coords);\r\n    setToSuggestions([]);\r\n    setActiveInput(null);\r\n\r\n    // Notify parent component\r\n    if (onLocationChange) {\r\n      onLocationChange(\"to\", {\r\n        address: place.display_name,\r\n        coords: coords,\r\n        place: place,\r\n      });\r\n    }\r\n\r\n    // For route search, notify with both coordinates when both are available\r\n    if (searchType === \"route\" && onCoordsSelect && fromCoords) {\r\n      onCoordsSelect({\r\n        from: fromCoords,\r\n        to: coords,\r\n        fromAddress: fromLocation,\r\n        toAddress: place.display_name,\r\n      });\r\n    }\r\n  };\r\n\r\n  // FIXED: Use current location with proper coordinate handling\r\n  const handleUseMyLocation = () => {\r\n    if (!navigator.geolocation) {\r\n      alert(\"Geolocation is not supported by this browser.\");\r\n      return;\r\n    }\r\n\r\n    setIsLoadingLocation(true);\r\n    navigator.geolocation.getCurrentPosition(\r\n      async (position) => {\r\n        const { latitude, longitude } = position.coords;\r\n\r\n        console.log(\"Current location:\", { latitude, longitude });\r\n\r\n        try {\r\n          const res = await fetch(\r\n            `${\r\n              import.meta.env.VITE_BASE_URL\r\n            }/reverse-geocode?lat=${latitude}&lon=${longitude}`\r\n          );\r\n\r\n          // FIXED: Use proper coordinate format\r\n          const coords = { lat: latitude, lon: longitude }; // Use 'lon' not 'lng'\r\n\r\n          if (!res.ok) {\r\n            // If reverse geocoding fails, still use coordinates\r\n            const locationName = `${latitude.toFixed(4)}, ${longitude.toFixed(\r\n              4\r\n            )}`;\r\n            setFromLocation(locationName);\r\n            setFromCoords(coords);\r\n\r\n            if (onLocationChange) {\r\n              onLocationChange(\"from\", {\r\n                address: locationName,\r\n                coords: coords,\r\n                place: {\r\n                  lat: latitude,\r\n                  lon: longitude, // Use 'lon' not 'lng'\r\n                  display_name: locationName,\r\n                },\r\n              });\r\n            }\r\n\r\n            // For location search, notify immediately\r\n            if (searchType === \"location\" && onCoordsSelect) {\r\n              onCoordsSelect({\r\n                from: coords,\r\n                to: null,\r\n                fromAddress: locationName,\r\n                toAddress: \"\",\r\n              });\r\n            }\r\n\r\n            setIsLoadingLocation(false);\r\n            return;\r\n          }\r\n\r\n          const data = await res.json();\r\n\r\n          if (data.display_name) {\r\n            setFromLocation(data.display_name);\r\n            setFromCoords(coords);\r\n\r\n            if (onLocationChange) {\r\n              onLocationChange(\"from\", {\r\n                address: data.display_name,\r\n                coords: coords,\r\n                place: data,\r\n              });\r\n            }\r\n\r\n            // For location search, notify immediately\r\n            if (searchType === \"location\" && onCoordsSelect) {\r\n              onCoordsSelect({\r\n                from: coords,\r\n                to: null,\r\n                fromAddress: data.display_name,\r\n                toAddress: \"\",\r\n              });\r\n            }\r\n          } else {\r\n            // Fallback to coordinates if no display name\r\n            const locationName = `${latitude.toFixed(4)}, ${longitude.toFixed(\r\n              4\r\n            )}`;\r\n            setFromLocation(locationName);\r\n            setFromCoords(coords);\r\n\r\n            if (onLocationChange) {\r\n              onLocationChange(\"from\", {\r\n                address: locationName,\r\n                coords: coords,\r\n                place: {\r\n                  lat: latitude,\r\n                  lon: longitude, // Use 'lon' not 'lng'\r\n                  display_name: locationName,\r\n                },\r\n              });\r\n            }\r\n\r\n            // For location search, notify immediately\r\n            if (searchType === \"location\" && onCoordsSelect) {\r\n              onCoordsSelect({\r\n                from: coords,\r\n                to: null,\r\n                fromAddress: locationName,\r\n                toAddress: \"\",\r\n              });\r\n            }\r\n          }\r\n        } catch (error) {\r\n          console.error(\"Error fetching location:\", error);\r\n          // Still use coordinates even if reverse geocoding fails\r\n          const coords = { lat: latitude, lon: longitude }; // Use 'lon' not 'lng'\r\n          const locationName = `${latitude.toFixed(4)}, ${longitude.toFixed(\r\n            4\r\n          )}`;\r\n          setFromLocation(locationName);\r\n          setFromCoords(coords);\r\n\r\n          if (onLocationChange) {\r\n            onLocationChange(\"from\", {\r\n              address: locationName,\r\n              coords: coords,\r\n              place: {\r\n                lat: latitude,\r\n                lon: longitude, // Use 'lon' not 'lng'\r\n                display_name: locationName,\r\n              },\r\n            });\r\n          }\r\n\r\n          // For location search, notify immediately\r\n          if (searchType === \"location\" && onCoordsSelect) {\r\n            onCoordsSelect({\r\n              from: coords,\r\n              to: null,\r\n              fromAddress: locationName,\r\n              toAddress: \"\",\r\n            });\r\n          }\r\n        } finally {\r\n          setIsLoadingLocation(false);\r\n        }\r\n      },\r\n      (error) => {\r\n        console.error(\"Geolocation error:\", error);\r\n        let message = \"Error getting your location. \";\r\n        switch (error.code) {\r\n          case error.PERMISSION_DENIED:\r\n            message += \"Please enable location access.\";\r\n            break;\r\n          case error.POSITION_UNAVAILABLE:\r\n            message += \"Location information is unavailable.\";\r\n            break;\r\n          case error.TIMEOUT:\r\n            message += \"Location request timed out.\";\r\n            break;\r\n          default:\r\n            message += \"Please try again.\";\r\n            break;\r\n        }\r\n        alert(message);\r\n        setIsLoadingLocation(false);\r\n      },\r\n      {\r\n        timeout: 10000,\r\n        enableHighAccuracy: true,\r\n        maximumAge: 300000, // 5 minutes\r\n      }\r\n    );\r\n  };\r\n\r\n  // Swap locations\r\n  const swapLocations = () => {\r\n    // Only allow swapping in route mode\r\n    if (searchType !== \"route\") return;\r\n\r\n    // Swap display names\r\n    const tempLocation = fromLocation;\r\n    setFromLocation(toLocation);\r\n    setToLocation(tempLocation);\r\n\r\n    // Swap coordinates\r\n    const tempCoords = fromCoords;\r\n    setFromCoords(toCoords);\r\n    setToCoords(tempCoords);\r\n\r\n    // Notify parent component\r\n    if (onLocationChange && fromCoords && toCoords) {\r\n      onLocationChange(\"from\", {\r\n        address: toLocation,\r\n        coords: toCoords,\r\n      });\r\n      onLocationChange(\"to\", {\r\n        address: fromLocation,\r\n        coords: tempCoords,\r\n      });\r\n    }\r\n\r\n    // Notify with swapped coordinates\r\n    if (onCoordsSelect && fromCoords && toCoords) {\r\n      onCoordsSelect({\r\n        from: toCoords,\r\n        to: tempCoords,\r\n        fromAddress: toLocation,\r\n        toAddress: tempLocation,\r\n      });\r\n    }\r\n  };\r\n\r\n  // Clear input\r\n  const clearFromLocation = () => {\r\n    setFromLocation(\"\");\r\n    setFromCoords(null);\r\n    setFromSuggestions([]);\r\n    if (onLocationChange) {\r\n      onLocationChange(\"from\", { address: \"\", coords: null });\r\n    }\r\n  };\r\n\r\n  const clearToLocation = () => {\r\n    setToLocation(\"\");\r\n    setToCoords(null);\r\n    setToSuggestions([]);\r\n    if (onLocationChange) {\r\n      onLocationChange(\"to\", { address: \"\", coords: null });\r\n    }\r\n  };\r\n\r\n  // Close suggestions when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = () => {\r\n      setActiveInput(null);\r\n      setFromSuggestions([]);\r\n      setToSuggestions([]);\r\n    };\r\n\r\n    document.addEventListener(\"click\", handleClickOutside);\r\n    return () => document.removeEventListener(\"click\", handleClickOutside);\r\n  }, []);\r\n\r\n  const { t, i18n } = useTranslation();\r\n  const [selectedLang, setSelectedLang] = useState(\r\n    localStorage.getItem(\"selectedLanguage\") || \"en\"\r\n  );\r\n\r\n  const LANGUAGES = {\r\n    en: { name: \"English\", flag: \"üá∫üá∏\" },\r\n    hi: { name: \"‡§π‡§ø‡§®‡•ç‡§¶‡•Ä\", flag: \"üáÆüá≥\" },\r\n    ta: { name: \"‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç\", flag: \"üáÆüá≥\" },\r\n    te: { name: \"‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å\", flag: \"üáÆüá≥\" },\r\n    kn: { name: \"‡≤ï‡≤®‡≥ç‡≤®‡≤°\", flag: \"üáÆüá≥\" },\r\n    ml: { name: \"‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç\", flag: \"üáÆüá≥\" },\r\n    bn: { name: \"‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ\", flag: \"üáÆüá≥\" },\r\n    gu: { name: \"‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä\", flag: \"üáÆüá≥\" },\r\n    mr: { name: \"‡§Æ‡§∞‡§æ‡§†‡•Ä\", flag: \"üáÆüá≥\" },\r\n    pa: { name: \"‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä\", flag: \"üáÆüá≥\" },\r\n    ur: { name: \"ÿßŸèÿ±ÿØŸèŸà\", flag: \"üáµüá∞\" }, // or üáÆüá≥ if preferred\r\n    kok: { name: \"‡§ï‡•ã‡§Ç‡§ï‡§£‡•Ä\", flag: \"üáÆüá≥\" },\r\n    or: { name: \"‡¨ì‡¨°‡¨º‡¨ø‡¨Ü\", flag: \"üáÆüá≥\" },\r\n    ne: { name: \"‡§®‡•á‡§™‡§æ‡§≤‡•Ä\", flag: \"üá≥üáµ\" },\r\n    sat: { name: \"·±•·±ü·±±·±õ·±ü·±≤·±§\", flag: \"üáÆüá≥\" },\r\n    sd: { name: \"ÿ≥ŸÜ⁄åŸä\", flag: \"üáµüá∞\" }, // or üáÆüá≥ if preferred\r\n    mni: { name: \"‡¶Æ‡ßá‡¶á‡¶§‡ßá‡¶á ‡¶≤‡ßã‡¶®\", flag: \"üáÆüá≥\" },\r\n    ks: { name: \"ŸÉŸ≤ÿ¥Ÿèÿ±\", flag: \"üáÆüá≥\" },\r\n    as: { name: \"‡¶Ö‡¶∏‡¶Æ‡ßÄ‡¶Ø‡¶º‡¶æ\", flag: \"üáÆüá≥\" },\r\n  };\r\n\r\n  // Handle language change with i18next\r\n  const handleLanguageChange = (langCode) => {\r\n    if (!langCode) return;\r\n\r\n    const currentLang = localStorage.getItem(\"selectedLanguage\");\r\n    if (currentLang === langCode) return;\r\n\r\n    setSelectedLang(langCode);\r\n    localStorage.setItem(\"selectedLanguage\", langCode);\r\n\r\n    // Change language using i18next\r\n    i18n.changeLanguage(langCode);\r\n  };\r\n\r\n  // Initialize language on component mount\r\n  useEffect(() => {\r\n    const savedLang = localStorage.getItem(\"selectedLanguage\");\r\n    if (savedLang && savedLang !== i18n.language) {\r\n      i18n.changeLanguage(savedLang);\r\n      setSelectedLang(savedLang);\r\n    }\r\n  }, [i18n]);\r\n\r\n  const [address, setAddress] = useState(\"\");\r\n  const { listening, startListening } = useSpeechToText();\r\n\r\n  const handleMicClick = (type) => {\r\n    startListening(async (spokenText) => {\r\n      setAddress(spokenText); // Show in input\r\n      setActiveInput(spokenText);\r\n      if (type === \"from\") {\r\n        setFromLocation(spokenText);\r\n      }\r\n      if (type === \"to\") {\r\n        setToLocation(spokenText);\r\n      }\r\n      const geoData = await geocodeAddress(spokenText);\r\n      console.log(\"Geo data : \", geoData);\r\n      if (geoData) {\r\n        if (type === \"from\") {\r\n          setFromLocation(geoData.address);\r\n          setFromCoords(geoData.coords); // Send back to parent\r\n          if (searchType === \"route\" && onCoordsSelect && toCoords) {\r\n            onCoordsSelect({\r\n              from: geoData.coords,\r\n              to: toCoords,\r\n              fromAddress: geoData.address,\r\n              toAddress: toLocation,\r\n            });\r\n          }\r\n        } else if (type === \"to\") {\r\n          setToCoords(geoData.coords);\r\n          setToLocation(geoData.address);\r\n          if (searchType === \"route\" && onCoordsSelect && fromCoords) {\r\n            onCoordsSelect({\r\n              from: fromCoords,\r\n              to: geoData.coords,\r\n              fromAddress: fromLocation,\r\n              toAddress: geoData.address,\r\n            });\r\n          }\r\n        }\r\n      } else {\r\n        alert(\"Couldn't find the location. Please try again.\");\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* From Location */}\r\n      <div className=\"relative\">\r\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n          {searchType === \"location\"\r\n            ? t(\"locationSearch.searchLocation\")\r\n            : t(\"locationSearch.from\")}\r\n        </label>\r\n        <div className=\"relative\">\r\n          <input\r\n            type=\"text\"\r\n            value={fromLocation}\r\n            onChange={(e) => handleFromLocationChange(e.target.value)}\r\n            onFocus={() => setActiveInput(\"from\")}\r\n            placeholder={\r\n              searchType === \"location\"\r\n                ? t(\"locationSearch.enterLocation\")\r\n                : t(\"locationSearch.enterStarting\")\r\n            }\r\n            className=\"w-full p-4 pl-12 pr-10 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all\"\r\n          />\r\n          <MapPin className=\"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n          {!fromLocation && (\r\n            <button\r\n              onClick={() => handleMicClick(\"from\")}\r\n              type=\"button\"\r\n              className={`p-3 absolute right-6 top-1/2 transform -translate-y-1/2 rounded-full bg-green-100 text-green-700 hover:bg-green-200 transition ${\r\n                listening ? \"animate-pulse bg-green-200\" : \"\"\r\n              }`}\r\n              title=\"Speak now\"\r\n            >\r\n              <Mic className=\"w-5 h-5\" />\r\n            </button>\r\n          )}\r\n\r\n          {fromLocation && (\r\n            <button\r\n              onClick={clearFromLocation}\r\n              className=\"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600\"\r\n            >\r\n              <X className=\"w-5 h-5 \" />\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/* Current Location Button */}\r\n        <button\r\n          onClick={handleUseMyLocation}\r\n          disabled={isLoadingLocation}\r\n          className=\"mt-2 text-sm text-green-600 hover:text-green-700 flex items-center transition-colors disabled:opacity-50\"\r\n        >\r\n          {isLoadingLocation ? (\r\n            <Loader2 className=\"w-4 h-4 mr-1 animate-spin\" />\r\n          ) : (\r\n            <Navigation className=\"w-4 h-4 mr-1\" />\r\n          )}\r\n          {isLoadingLocation\r\n            ? t(\"locationSearch.gettingLocation\")\r\n            : t(\"locationSearch.useCurrentLocation\")}\r\n        </button>\r\n\r\n        {/* From Location Suggestions */}\r\n        {fromSuggestions.length > 0 && activeInput === \"from\" && (\r\n          <div className=\"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded-xl shadow-lg max-h-60 overflow-y-auto\">\r\n            {isLoadingSuggestions && (\r\n              <div className=\"p-3 text-center text-gray-500 text-sm\">\r\n                <Loader2 className=\"w-4 h-4 animate-spin mx-auto mb-1\" />\r\n                {t(\"locationSearch.searching\")}\r\n              </div>\r\n            )}\r\n            {fromSuggestions.map((place, index) => (\r\n              <button\r\n                key={index}\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  selectFrom(place);\r\n                }}\r\n                className=\"w-full text-left p-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors\"\r\n              >\r\n                <div className=\"flex items-start\">\r\n                  <MapPin className=\"w-4 h-4 text-gray-400 mt-0.5 mr-2 flex-shrink-0\" />\r\n                  <div>\r\n                    <div className=\"text-sm font-medium text-gray-900 truncate\">\r\n                      {place.display_name}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </button>\r\n            ))}\r\n            {listening && (\r\n              <p className=\"text-xs text-green-600 mt-1\">Listening...</p>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Only show swap button and To field for route search */}\r\n      {searchType === \"route\" && (\r\n        <>\r\n          <div className=\"flex justify-center my-2\">\r\n            {/* Swap Button */}\r\n            <button\r\n              onClick={swapLocations}\r\n              className=\"p-3 bg-green-100 hover:bg-green-200 rounded-full transition-all duration-300 hover:scale-110\"\r\n              title=\"Swap locations\"\r\n            >\r\n              <ArrowLeftRight className=\"w-5 h-5 text-green-600\" />\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"relative\">\r\n            {/* To Location Input & Suggestions */}\r\n            <div className=\"flex-1 relative\">\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                {t(\"locationSearch.to\")}\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={toLocation}\r\n                onChange={(e) => handleToLocationChange(e.target.value)}\r\n                onFocus={() => setActiveInput(\"to\")}\r\n                className=\"w-full p-4 pl-12 pr-10 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all\"\r\n                placeholder={t(\"locationSearch.selectDestination\")}\r\n              />\r\n              <MapPin className=\"absolute left-4 top-8 transform -translate-y-1/2 text-gray-400 w-5 h-5 mt-6\" />\r\n              {!toLocation && (\r\n                <button\r\n                  onClick={() => handleMicClick(\"to\")}\r\n                  type=\"button\"\r\n                  className={`p-3 absolute right-6 top-2/3 transform -translate-y-1/2 rounded-full bg-green-100 text-green-700 hover:bg-green-200 transition ${\r\n                    listening ? \"animate-pulse bg-green-200\" : \"\"\r\n                  }`}\r\n                  title=\"Speak now\"\r\n                >\r\n                  <Mic className=\"w-5 h-5\" />\r\n                </button>\r\n              )}\r\n\r\n              {toLocation && (\r\n                <button\r\n                  onClick={clearToLocation}\r\n                  className=\"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600\"\r\n                >\r\n                  <X className=\"w-5 h-5\" />\r\n                </button>\r\n              )}\r\n\r\n              {/* To Suggestions */}\r\n              {toSuggestions.length > 0 && activeInput === \"to\" && (\r\n                <ul className=\"absolute z-20 w-full bg-white border border-gray-200 rounded-xl shadow-lg mt-1 max-h-48 overflow-y-auto\">\r\n                  {toSuggestions.map((place, idx) => (\r\n                    <li\r\n                      key={idx}\r\n                      onClick={() => selectTo(place)}\r\n                      className=\"p-3 cursor-pointer hover:bg-green-50 border-b border-gray-100 last:border-b-0\"\r\n                    >\r\n                      <div className=\"flex items-start space-x-2\">\r\n                        <MapPin className=\"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0\" />\r\n                        <div>\r\n                          <p className=\"text-sm font-medium text-gray-900 line-clamp-1\">\r\n                            {place.display_name.split(\",\")[0]}\r\n                          </p>\r\n                          <p className=\"text-xs text-gray-500 line-clamp-1\">\r\n                            {place.display_name}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {/* Debug Info - Show current coordinates */}\r\n      {(fromCoords || toCoords) && (\r\n        <div className=\"mt-4 p-3 bg-gray-50 rounded-lg text-xs text-gray-600\">\r\n          {fromCoords && (\r\n            <p>\r\n              From: {fromLocation} ‚Üí ({fromCoords.lat.toFixed(6)},{\" \"}\r\n              {fromCoords.lon.toFixed(6)})\r\n            </p>\r\n          )}\r\n          {toCoords && (\r\n            <p>\r\n              To: {toLocation} ‚Üí ({toCoords.lat.toFixed(6)},{\" \"}\r\n              {toCoords.lon.toFixed(6)})\r\n            </p>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\shared\\Navbar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\ui\\avatar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\ui\\button.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":55,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":55,"endColumn":32}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\r\n        outline:\r\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80\",\r\n        ghost:\r\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\r\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\r\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\r\n        icon: \"size-9\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}) {\r\n  const Comp = asChild ? Slot : \"button\"\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props} />\r\n  );\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\ui\\card.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\ui\\input.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\ui\\label.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\ui\\popover.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\ui\\select.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\components\\ui\\sonner.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\hooks\\useSpeechToText.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\i18n\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\lib\\utils.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\main.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file has exports. Move your component(s) to a separate file.","line":15,"column":7,"nodeType":"Identifier","messageId":"noExport","endLine":15,"endColumn":22}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { StrictMode } from \"react\";\r\nimport { createRoot } from \"react-dom/client\";\r\nimport \"./index.css\";\r\nimport App from \"./App.jsx\";\r\nimport { Toaster } from \"./components/ui/sonner\";\r\nimport { store } from \"./Redux/store\";\r\nimport './i18n';\r\nimport { Suspense } from \"react\";\r\nimport { Provider } from \"react-redux\";\r\nimport { persistStore } from \"redux-persist\";\r\nimport { PersistGate } from \"redux-persist/lib/integration/react\";\r\nimport { Auth0Provider } from \"@auth0/auth0-react\";\r\n\r\nconst persistor = persistStore(store);\r\nconst LoadingFallback = () => (\r\n  <div className=\"min-h-screen bg-gradient-to-br from-green-50 via-white to-green-100 flex items-center justify-center\">\r\n    <div className=\"text-center\">\r\n      <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto mb-4\"></div>\r\n      <p className=\"text-lg text-gray-600\">Loading...</p>\r\n    </div>\r\n  </div>\r\n);\r\n\r\ncreateRoot(document.getElementById(\"root\")).render(\r\n  <StrictMode>\r\n    <Provider store={store}>\r\n      <PersistGate loading={null} persistor={persistor}>\r\n        <Auth0Provider\r\n          domain=\"dev-po1r5cykjnu8e0ld.us.auth0.com\"\r\n          clientId=\"u6qP6ngjZoPW3odaWIageoLhV8E2C2IY\"\r\n          authorizationParams={{\r\n            redirect_uri: `${window.location.origin}/complete/profile`,\r\n            audience: \"http://localhost:5000/api/v3\",  \r\n          }}\r\n        >\r\n          <Suspense fallback={<LoadingFallback />}>\r\n          <App />\r\n          </Suspense>\r\n          <Toaster />\r\n        </Auth0Provider>\r\n      </PersistGate>\r\n    </Provider>\r\n  </StrictMode>\r\n);\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\services\\apiConnector.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\services\\apis.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\services\\busSearchService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\services\\geocode.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\services\\journeyIntegrationService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\services\\journeyPlanningService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\src\\services\\operations\\busAPI.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shaswat\\OneDrive\\Documents\\workProves\\opensource\\gps-fix\\Frontend\\vite.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
